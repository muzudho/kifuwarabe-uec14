# Step [O1o1o0g1o0] ã¯ã˜ã‚ã«

ğŸ‘‡ Step ã®å¤‰ãªæ•°å­—ã®èª¬æ˜  

ğŸ“– [é›»è„³å‘é‡è¡¨è¨˜](https://qiita.com/muzudho1/items/fdbf31e41dd8c247081f)  

ğŸ‘‡ ç·´ç¿’ç·¨ã‚’èª­ã¿çµ‚ã‚ã£ã¦ã‚‹ã‚‚ã®ã¨ã™ã‚‹  

ğŸ“– [Go [O1o1o0] ç›®æŒ‡ã›ï¼ç¬¬ï¼‘ï¼”å›ï¼µï¼¥ï¼£æ¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å›²ç¢å¤§ä¼šï¼œç·´ç¿’ç·¨ï¼](https://qiita.com/muzudho1/items/cea62be01f7418bbf150)  

ğŸ‘‡ ã¾ãŸã€æŠ€è¡“çš„ã§ãªã„å†…å®¹ã‚’å«ã‚€ãƒ–ãƒ­ã‚°ã‚’åˆ¥ã®å ´æ‰€ã« é–‹è¨­ã™ã‚‹  

ğŸ“– [ç›®æŒ‡ã›ï¼ç¬¬ï¼‘ï¼”å›ï¼µï¼¥ï¼£æ¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å›²ç¢å¤§ä¼šâ˜†ï¼ˆï¼¾ï½‘ï¼¾ï¼‰ï¼œãã®ï¼’ï¼](http://grayscale2.dou-jin.com/go/%E7%9B%AE%E6%8C%87%E3%81%9B%EF%BC%81%E7%AC%AC%EF%BC%91%EF%BC%94%E5%9B%9E%EF%BC%B5%EF%BC%A5%EF%BC%A3%E6%9D%AF%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%BC%E5%9B%B2%E7%A2%81%E5%A4%A7%E4%BC%9A%E2%98%86%EF%BC%88%EF%BC%BE)  

ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:  

| What is           | This is            |
| ----------------- | ------------------ |
| OS                | Windows            |
| Editor            | Visual Studio Code |
| Program Language  | Go                 |
| Remote Repository | Git Hub            |

ğŸ‘‡ ã¾ãšã€ã‚½ãƒ¼ã‚¹ã®ç½®ãå ´æ‰€ã‚’æ±ºã‚ã¦ãŠã  

ğŸ“– [ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/muzudho/kifuwarabe-uec14)  

## Step [O1o1o0g2o0] ã‚½ãƒ¼ã‚¹ã®ç½®ãå ´æ‰€ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰

Goè¨€èªã§ã¯ ãƒ­ãƒ¼ã‚«ãƒ«PCã®ã©ã“ã«ã‚½ãƒ¼ã‚¹ã‚’ç½®ãã‹ã¯è‡ªåˆ†ã§è¨­å®šã—ã¦æ±ºã‚ã¦ãŠãã€‚  
ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ›ãƒ¼ãƒ ã®ä¸‹ã«ç½®ã„ã¦ã„ã‚‹ã®ã§ã€çœŸä¼¼ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã»ã—ã„  

Input:  

```shell
# Windows
echo %HOMEPATH%
```

Output:  

```plaintext
\Users\ã‚€ãšã§ã‚‡
```

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ›ãƒ¼ãƒ ã®ãƒ‘ã‚¹ãŒåˆ†ã‹ã£ãŸã€‚ã“ã®ä¸‹ã« `go\src` ã§å§‹ã¾ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ä½œã£ã¦ã„ãã€‚  
ç§ã¯ä»¥ä¸‹ã®å ´æ‰€ã«ã—ãŸ  

`C:\Users\ã‚€ãšã§ã‚‡\Documents\GitHub\kifuwarabe-uec14`

ä»¥é™ã®æ–‡ç« ã§ã¯ã€ã‚ãªãŸã®ãƒªãƒã‚¸ãƒˆãƒªã«èª­ã¿æ›¿ãˆã¦ã»ã—ã„  

## Step [O1o1o0g3o0] Visual Studio Code ã‚’ä½¿ã†

ãŒã‚“ã°ã£ã¦ã€ `Visual Studio Code` ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ãŠã„ã¦ã»ã—ã„  

ğŸ“– [Visual Studio Code](https://code.visualstudio.com/)  

## Step [O1o1o0g4o0] Goã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

`Visual Studio Code` ã® `Extensions` ã‹ã‚‰ã€ `Go` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã„ã¦ã»ã—ã„  

## Step [O1o1o0g5o0] ãƒãƒ«ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¤‡æ•°ä½œã‚Œã‚‹ã‚ˆã†ã€  
è¤‡æ•°ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«å¯¾å¿œã—ã¦ãŠã    

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go work init
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
ğŸ‘‰  â””â”€â”€ ğŸ“„ go.work
```

```go
go 1.19

```

## Step [O1o1o0g6o0] è¨­å®š - .gitignore ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ï¼ˆç„¡ã‘ã‚Œã°æ–°è¦ä½œæˆï¼‰ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
ğŸ‘‰  â”œâ”€â”€ ğŸ“„ .gitignore
  	â””â”€â”€ ğŸ“„ go.work
```

ğŸ‘‡ ä¾‹ãˆã°å†’é ­ã«è¿½åŠ   

```plaintext
# ã“ã®ä¸‹ã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------

go.work


# ã“ã®ä¸Šã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------
# ...ç•¥...
```

## Step [O1o1o0g7o0] ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go mod init github.com/muzudho/kifuwarabe-uec14
#           -----------------------------------
#           1
# 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã€‚ã“ã®éƒ¨åˆ†ã¯ã‚ãªãŸã®ãƒ¬ãƒã‚¸ãƒˆãƒªã«åˆã‚ã›ã¦å¤‰ãˆã¦ã»ã—ã„
```

Output:  

```plaintext
go: creating new go.mod: module github.com/muzudho/kifuwarabe-uec14
go: to add module requirements and sums:
        go mod tidy
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
    â”œâ”€â”€ ğŸ“„ .gitignore
ğŸ‘‰  â”œâ”€â”€ ğŸ“„ go.mod
  	â””â”€â”€ ğŸ“„ go.work
```

```go
module github.com/muzudho/kifuwarabe-uec14

go 1.19
```

## Step [O1o1o0g8o0] ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚ºã¸ç™»éŒ²

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go work use .
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ã§ç·¨é›†ã•ã‚Œã¦ã„ã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ go.work
```

```go
// ...ç•¥...


// * ä»¥ä¸‹ã®è¡ŒãŒè‡ªå‹•è¿½åŠ 
use .
```

# Step [O1o1o0g9o0] ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆä½œæˆ - ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ãƒ«ãƒ‰

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g9o0]

package main

import (
	"flag"
	"fmt"
)

func main() {
	flag.Parse()
	// ãƒ—ãƒ­ã‚°ãƒ©ãƒ å
	var name = flag.Arg(0)

	// ã“ã®ä¸‹ã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	// ã“ã®ä¸Šã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	if name == "hello" { // [O1o1o0g9o0]
		fmt.Println("Hello, World!")

		// ã“ã®ä¸‹ã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------

		// ã“ã®ä¸Šã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------

	} else {
		fmt.Println("go run . {programName}")
	}
}

// EOF [O1o1o0g9o0]
```

## Step [O1o1o0g10o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
go mod tidy
```

## Step [O1o1o0g10o1o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go run . hello
```

Output:  

```plaintext
Hello, World!
```

# Step [O1o1o0g11o___100o0] ã‚«ãƒ¼ãƒãƒ«ä½œæˆ

ğŸ‘‡ ã“ã“ã§ã¯ã€ã‚«ãƒ¼ãƒãƒ«ã¯ä»¥ä¸‹ã®æ„å‘³ã‚’æŒ‡ã™  

* æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã†ã¡ã€ãŠãŠã¾ã‹ã«è¨€ã£ã¦ **ã‚²ãƒ¼ãƒ ã®çŸ¥è­˜ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ä»¥å¤–ã®éƒ¨åˆ†**
* ï¼‘ã¤ã®ã‚«ãƒ¼ãƒãƒ«ã¯ã€ï¼‘ã¤ã®å¯¾å±€ã«å¯¾å¿œã™ã‚‹

## Step [O1o1o0g11o___100o1p0] ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
ğŸ‘‰	â”œâ”€â”€ ğŸ“‚ kernel
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

## Step [O1o1o0g11o___100o2p0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ç§»å‹•

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd kernel
```

## Step [O1o1o0g11o___100o3o_1o0] ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚ºã¸ç™»éŒ²

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go work use .
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ã§ç·¨é›†ã•ã‚Œã¦ã„ã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...


// * ä»¥ä¸‹ã®è¡ŒãŒè‡ªå‹•å‰Šé™¤
// use .
// * ä»¥ä¸‹ãŒè‡ªå‹•è¿½åŠ 
use (
	.
	./kernel
)
```

## Step [O1o1o0g11o___100o3o0] Goãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go mod init github.com/muzudho/kifuwarabe-uec14/kernel
```

Output:  

```shell
go: creating new go.mod: module github.com/muzudho/kifuwarabe-uec14/kernel
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
module github.com/muzudho/kifuwarabe-uec14/kernel

go 1.19
```

## Step [O1o1o0g11o___100o4p0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’æˆ»ã™

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd ..
```

# Step [O1o1o0g11o__10o_1o0] æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

## Step [O1o1o0g11o__10o_2o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - engine.toml

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
ğŸ‘‰  â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```toml
# BOF [O1o1o0g11o__10o_2o0]
# æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã™ã€‚ CgfGoBan ãªã©ã® GUI ã¯ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¾ã›ã‚“

# Game - å¯¾å±€ï¼‘ã¤åˆ†ã«ç›¸å½“
[Game]

# Komi - ã‚³ãƒŸ
Komi = 6.5

# BoardSize - ä½•è·¯ç›¤
BoardSize = 19

# MaxMoves - æœ€å¤§æ‰‹æ•°
MaxMoves = 400

# BoardData - ç›¤é¢
#
# * '.' - ç©ºç‚¹
# * 'x' - é»’çŸ³
# * 'o' - ç™½çŸ³
# * '+' - å£
# * åŠè§’ç©ºç™½ã¯ç„¡è¦–ã—ã¾ã™
BoardData = '''
+ + + + + + + + + + + + + + + + + + + + +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ + + + + + + + + + + + + + + + + + + + +
'''

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ãƒ‘ã‚¹ã®è¨­å®š
[Paths]

# PlainTextLog - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚ˆã‚Šè©³ç´°ãªãƒ­ã‚°
PlainTextLog = "kifuwarabe-uec14.log"

# JsonLog - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®ãƒ­ã‚°
JsonLog = "kifuwarabe-uec14-json.log"

# EOF [O1o1o0g11o__10o_2o0]
```

## Step [O1o1o0g11o__10o_3o0] ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« - go-toml

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go get github.com/pelletier/go-toml
go mod tidy
```

Output:  

```plaintext
go: added github.com/pelletier/go-toml v1.9.5
```

## Step [O1o1o0g11o__10o_4o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - engine_config.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o__10o_4o0]

package main

import (
	"os"

	"github.com/pelletier/go-toml"
)

// LoadEngineConfig - æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
func LoadEngineConfig(
	path string,
	onError func(error) Config) Config {

	// ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼
	var fileData, err = os.ReadFile(path)
	if err != nil {
		return onError(err)
	}

	// Tomlè§£æ
	var binary = []byte(string(fileData))
	var config = Config{}
	// Goè¨€èªã® struct ã«åˆã‚ã›ã¦ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
	toml.Unmarshal(binary, &config)

	return config
}

// Config - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
type Config struct {
	// Game - å¯¾å±€
	Game Game
	// Paths - ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ãƒ‘ã‚¹ã®è¨­å®š
	Paths Paths
}

// BoardSize - ä½•è·¯ç›¤ã‹
func (c *Config) BoardSize() int {
	return int(c.Game.BoardSize)
}

// Komi - ã‚³ãƒŸ
//
// * float 32bit ã§è¶³ã‚Šã‚‹ãŒã€å®Ÿè¡Œé€Ÿåº¦å„ªå…ˆã§ float 64bit ã«å¤‰æ›ã—ã¦è¿”ã™
func (c *Config) Komi() float64 {
	return float64(c.Game.Komi)
}

// MaxMovesNum - æœ€å¤§æ‰‹æ•°
func (c *Config) MaxMovesNum() int {
	return int(c.Game.MaxMoves)
}

// PlainTextLog - PlainTextLog - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚ˆã‚Šè©³ç´°ãªãƒ­ã‚°
func (c *Config) PlainTextLog() string {
	return c.Paths.PlainTextLog
}

// JsonLog - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®ãƒ­ã‚°
func (c *Config) JsonLog() string {
	return c.Paths.JsonLog
}

// Game - å¯¾å±€
type Game struct {
	// Komi - ã‚³ãƒŸ
	Komi float32

	// BoardSize - ç›¤ã®ä¸€è¾ºã®é•·ã•
	BoardSize int8

	// MaxMoves - æ‰‹æ•°ã®ä¸Šé™
	MaxMoves int16

	// BoardData - ç›¤é¢ãƒ‡ãƒ¼ã‚¿
	BoardData string
}

// Paths - ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ãƒ‘ã‚¹ã®è¨­å®š
type Paths struct {
	// PlainTextLog - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚ˆã‚Šè©³ç´°ãªãƒ­ã‚°
	PlainTextLog string

	// JsonLog - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®ãƒ­ã‚°
	JsonLog string
}

// EOF [O1o1o0g11o__10o_4o0]
```

## Step [O1o1o0g11o__10o_5o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - main.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...

// func main() {
	// [O1o1o0g11o__10o_5o0] æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
	var (
		pEngineFilePath = flag.String("f", "engine.toml", "engine config file path")
	)
	// * ã“ã®ä¸Šã«è¿½åŠ 
	// flag.Parse()
	// var name = flag.Arg(0)
	// ã“ã®ä¸‹ã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------
	// * ã“ã®ä¸‹ã«è¿½åŠ 
	// [O1o1o0g11o__10o_5o0] æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
	var onError = func(err error) {
		// ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯å‡ºåŠ›ã§ãã¾ã›ã‚“ã€‚ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã¾ã èª­è¾¼ã‚“ã§ã„ã¾ã›ã‚“
		panic(err)
	}
	var engineConfig = LoadEngineConfig(*pEngineFilePath, onError)

// ...ç•¥...
```

## Step [O1o1o0g11o__10o_6o0] å®Ÿè¡Œã«ã¤ã„ã¦ã®å‚™è€ƒ

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ãŸä¾‹ã¯ã€ã“ã‚Œä»¥é™ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ç¤ºã™  

ã“ã‚Œä»¥é™ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ ğŸ“„ `engine.toml` ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚„å†…å®¹ã‚’ä»»æ„ã«ç·¨é›†ã—ã¦ã€ãŒã‚“ã°ã£ã¦ãƒ†ã‚¹ãƒˆã—ã¦ã»ã—ã„ã€‚  
ãƒ†ã‚¹ãƒˆãŒçµ‚ã‚ã£ãŸã‚‰ã‚‚ã¨ã«æˆ»ã—ã¦ã»ã—ã„  

ğŸ‘‡ æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­è¾¼ã‚€ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã« `-f` å¼•æ•°ã‚’ä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go run . -f engine.toml
```

* `-f engine.toml` ã‚’çœç•¥ã™ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `./engine.toml` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿ã«è¡Œã

# Step [O1o1o0g11o__10o0] ãƒ­ã‚¬ãƒ¼è¨­å®š

## Step [O1o1o0g11o__10o1o0] ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u go.uber.org/zap
```

## Step [O1o1o0g11o__10o2_1o0] è¨­å®š - .gitignore ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
ğŸ‘‰	â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â”œâ”€â”€ ğŸ“„ logger.go
 	â””â”€â”€ ğŸ“„ main.go
```

```plaintext
# ã“ã®ä¸‹ã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------
# ...ç•¥...

*.log

# ã“ã®ä¸Šã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------
# ...ç•¥...
```

## Step [O1o1o0g11o__10o2o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o__10o2o0]

package kernel

import (
	"os"
	"time"

	"go.uber.org/zap"
	"go.uber.org/zap/zapcore"
)

type SugaredLoggerForGame struct {
	// C is sugared logger for Console
	C *zap.SugaredLogger
	// J is sugared logger as JSON
	J *zap.SugaredLogger
}

func NewSugaredLoggerForGame(plainTextLogFile *os.File, jsonLogFile *os.File) *SugaredLoggerForGame {
	var slog = new(SugaredLoggerForGame) // Sugared LOGger
	slog.C = createSugaredLoggerForConsole(plainTextLogFile)
	slog.J = createSugaredLoggerAsJson(jsonLogFile)
	return slog
}

// ãƒ­ã‚¬ãƒ¼ã‚’ä½œæˆã—ã¾ã™ï¼Œã‚³ãƒ³ã‚½ãƒ¼ãƒ«å½¢å¼
func createSugaredLoggerForConsole(plainTextLogFile *os.File) *zap.SugaredLogger {
	// è¨­å®šï¼Œã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨
	var configC = zapcore.EncoderConfig{
		MessageKey: "message",

		// LevelKey:    "level",
		// EncodeLevel: zapcore.CapitalLevelEncoder,

		TimeKey:    "time",
		EncodeTime: encodeTimeSimpleInJapan, // ç°¡ç•¥åŒ–ã—ãŸã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

		// CallerKey:    "caller",
		// EncodeCaller: zapcore.ShortCallerEncoder,
	}

	// è¨­å®šã€ãƒ•ã‚¡ã‚¤ãƒ«ç”¨
	var configF = zapcore.EncoderConfig{
		MessageKey: "message",

		// LevelKey:    "level",
		// EncodeLevel: zapcore.CapitalLevelEncoder,

		TimeKey:    "time",
		EncodeTime: zapcore.ISO8601TimeEncoder, // æ—¥æœ¬æ™‚é–“ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

		// CallerKey:    "caller",
		// EncodeCaller: zapcore.ShortCallerEncoder,
	}

	// ã‚³ã‚¢
	var core = zapcore.NewTee(
		zapcore.NewCore(
			zapcore.NewConsoleEncoder(configC), // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å½¢å¼
			zapcore.Lock(os.Stderr),            // å‡ºåŠ›å…ˆã¯æ¨™æº–ã‚¨ãƒ©ãƒ¼
			zapcore.DebugLevel),                // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
		zapcore.NewCore(
			zapcore.NewConsoleEncoder(configF), // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å½¢å¼
			zapcore.AddSync(plainTextLogFile),       // å‡ºåŠ›å…ˆã¯ãƒ•ã‚¡ã‚¤ãƒ«
			zapcore.DebugLevel),                // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
	)

	// ãƒ­ã‚¬ãƒ¼ã®ãƒ“ãƒ«ãƒ‰
	var logger = zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))
	// ç³–è¡£æ§‹æ–‡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å–å¾—
	return logger.Sugar()
}

// ãƒ­ã‚¬ãƒ¼ã‚’ä½œæˆã—ã¾ã™ï¼ŒJSONè¤‡æ•°è¡Œå½¢å¼
func createSugaredLoggerAsJson(jsonLogFile *os.File) *zap.SugaredLogger {
	// è¨­å®š > è£½å“ç”¨
	var config = zap.NewProductionEncoderConfig()
	config.EncodeTime = zapcore.ISO8601TimeEncoder // æ—¥æœ¬æ™‚é–“ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

	// ã‚³ã‚¢
	var core = zapcore.NewTee(
		zapcore.NewCore(
			zapcore.NewJSONEncoder(config), // JSONå½¢å¼
			zapcore.AddSync(jsonLogFile),   // å‡ºåŠ›å…ˆã¯ãƒ•ã‚¡ã‚¤ãƒ«
			zapcore.DebugLevel),            // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
	)

	// ãƒ­ã‚¬ãƒ¼ã®ãƒ“ãƒ«ãƒ‰
	var logger = zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))
	// ç³–è¡£æ§‹æ–‡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å–å¾—
	return logger.Sugar()
}

// ç°¡ç•¥åŒ–ã—ãŸã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
// ğŸ“– [golang zap v1.0.0 ã§ãƒ­ã‚°ã®æ—¥ä»˜ã‚’JSTã§è¡¨ç¤ºã™ã‚‹æ–¹æ³•](https://qiita.com/fuku2014/items/c6501c187c8161336485)
func encodeTimeSimpleInJapan(t time.Time, enc zapcore.PrimitiveArrayEncoder) {
	// // JSTå½¢å¼
	// const layout = "2006-01-02T15:04:05+09:00"
	// jst := time.FixedZone("Asia/Tokyo", 9*60*60)
	// enc.AppendString(t.In(jst).Format(layout))

	// ç°¡ç•¥åŒ–ã—ãŸã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
	const layout = "[2006-01-02 15:04:05]"
	jst := time.FixedZone("Asia/Tokyo", 9*60*60)
	enc.AppendString(t.In(jst).Format(layout))
}

// EOF [O1o1o0g11o__10o2o0]
```

## Step [O1o1o0g11o__10o3o_1o0] ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥

ãŒã‚“ã°ã£ã¦ git ãªã©ã‚’ä½¿ã„ã€ `github.com/muzudho/kifuwarabe-uec14/kernel` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ã‚’  
ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã»ã—ã„  

## Step [O1o1o0g11o__10o3o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...

import (
	// ...ç•¥...
	"github.com/muzudho/kifuwarabe-uec14/kernel" // * ã‚ã¨ã§ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
)

func main() {
	// ...ç•¥...
	// ã“ã®ä¸‹ã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	// [O1o1o0g11o__10o3o0] ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
	var plainTextLogFile, _ = os.OpenFile(engineConfig.PlainTextLog(), os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)
	defer plainTextLogFile.Close() // ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨æ¸ˆã¿æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹
	// ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
	var jsonLogFile, _ = os.OpenFile(engineConfig.JsonLog(), os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)
	defer jsonLogFile.Close() // ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨æ¸ˆã¿æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹
	// ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸãƒ­ã‚¬ãƒ¼ã‚’ä½¿ã†ãªã‚‰
	var logg = kernel.NewSugaredLoggerForGame(plainTextLogFile, jsonLogFile) // customized LOGGer

	// ã“ã®ä¸Šã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	if name == "hello" { // [O1o1o0g9o0]
		// ...ç•¥...
		// ã“ã®ä¸‹ã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------
		// ...ç•¥...


	} else if name == "welcome" { // [O1o1o0g11o__10o0]
		logg.C.Infof("Welcome! name:'%s' weight:%.1f x:%d", "nihon taro", 92.6, 3)
		logg.J.Infow("Welcome!",
			"name", "nihon taro", "weight", 92.6, "x", 3)


		// ...ç•¥...
		// ã“ã®ä¸Šã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------
		// ...ç•¥...
	}
```

## Step [O1o1o0g11o__10o4o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
go mod tidy
```

Output:  

```plaintext
C:\Users\ã‚€ãšã§ã‚‡\Documents\GitHub\kifuwarabe-uec14>go mod tidy
go: finding module for package github.com/muzudho/kifuwarabe-uec14/kernel
go: downloading github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911105808-5a17a869516a
go: found github.com/muzudho/kifuwarabe-uec14/kernel in github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911105808-5a17a869516a
go: downloading github.com/stretchr/testify v1.8.0
go: downloading github.com/benbjohnson/clock v1.1.0
go: downloading go.uber.org/goleak v1.1.11
go: downloading gopkg.in/yaml.v3 v3.0.1
```

ğŸ‘‡ è‡ªåˆ†ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒ­ãƒ¼ã‚«ãƒ«PCã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹  

Example: ğŸ“‚ `C:\Users\ã‚€ãšã§ã‚‡\go\pkg\mod\github.com\muzudho`  

## Step [O1o1o0g11o__10o5o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go run . welcome
```

Output:  

```shell
2022-09-11T14:42:53.258+0900    Welcome! a:1 b:2 c:3
```

* æ¨™æº–å‡ºåŠ›ã¯ã€å¤§ä¼šã‚µãƒ¼ãƒãƒ¼ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã®ã«åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚å¾“ã£ã¦ æ¨™æº–å‡ºåŠ›ã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ã¨åå‰‡è² ã‘ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹
  * å¾“ã£ã¦ã€ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã—ãŸã„ã¨ãã¯ã€æ¨™æº–ã‚¨ãƒ©ãƒ¼ã«å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ–°è¦ä½œæˆã•ã‚ŒãŸ  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14-json.log
ğŸ‘‰	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14.log
 	â”œâ”€â”€ ğŸ“„ logger.go
 	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14-json.log`  

```json
{"level":"info","ts":"2022-09-11T14:43:54.145+0900","caller":"kifuwarabe-uec14/main.go:42","msg":"Welcome!","a":1,"b":2,"c":3}
```

* ä½œæˆã•ã‚Œã‚‹ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ JSONå½¢å¼ã§ã¯ãªã„ã€‚ ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã®JSONãŒè¤‡æ•°è¡Œä¸¦ã¶

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14.log`  

```plaintext
2022-09-11T14:43:54.112+0900	info	kifuwarabe-uec14/main.go:41	Welcome! a:1 b:2 c:3
```

# Step [O1o1o0g11o_1o0] ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
package main

import (
	"bufio"		// * è‡ªå‹•ã§è¿½åŠ ã•ã‚Œã‚‹
	"flag"
	"fmt"
	"os"		// * è‡ªå‹•ã§è¿½åŠ ã•ã‚Œã‚‹
	"strings"	// * è‡ªå‹•ã§è¿½åŠ ã•ã‚Œã‚‹
)

// ...ç•¥...


	if name == "hello" { // [O1o1o0g9o0]
		// ...ç•¥...
	} else {

		// * æ¶ˆã™
		// fmt.Println("go run . {programName}")

		// * è¿½åŠ 
		// [O1o1o0g11o_1o0] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç­‰ã‹ã‚‰ã®æ–‡å­—åˆ—å…¥åŠ›
		var scanner = bufio.NewScanner(os.Stdin)
		for scanner.Scan() {
			var command = scanner.Text()
			logg.C.Infof("# %s", command)             // äººé–“å‘ã‘ã®å‡ºåŠ›
			logg.J.Infow("input", "command", command) // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®å‡ºåŠ›

			// [O1o1o0g11o_1o0]
			var tokens = strings.Split(command, " ")
			switch tokens[0] {

			// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
			// -------------------------

			case "quit": // [O1o1o0g11o_1o0]
				// os.Exit(0)
				return

			// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
			// -------------------------

			default: // [O1o1o0g11o_1o0]
				logg.C.Infof("? unknown_command command:'%s'\n", tokens[0])
				logg.J.Infow("? unknown_command", "command", tokens[0])
			}
		}
	}


// ...ç•¥...
```

## Step [O1o1o0g11o_2o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
abc
```

Output:  

```
[2022-09-12 00:36:47]   # abc
[2022-09-12 00:36:47]   ? unknown_command command:'abc'
```

ğŸ‘† ãã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã¯å®šç¾©ã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒç¤ºã•ã‚Œã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
quit
```

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯çµ‚äº†ã—ãŸ  

å¼·åˆ¶çµ‚äº†ã—ãŸã„ã¨ãã¯ã€ `[Ctrl]` ã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰ `[C]` ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã»ã—ã„ã€‚  
ã“ã‚Œã‚’ä»¥å¾Œ `[Ctrl] + [C]` ã¨è¡¨è¨˜ã™ã‚‹  

# Step [O1o1o0g11o_3o0] ã‚«ãƒ¼ãƒãƒ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o_3o0]

package kernel

import "strings"

type Kernel struct {
	// Board - ç›¤
	Board *Board
}

func NewKernel() *Kernel {
	var k = new(Kernel)
	k.Board = NewBoard()
	return k
}

// Execute - å®Ÿè¡Œ
func (k *Kernel) Execute(command string, logg *SugaredLoggerForGame) bool {

	var tokens = strings.Split(command, " ")
	switch tokens[0] {

	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	default:
	}

	return false
}

// EOF [O1o1o0g11o_3o0]
```

## Step [O1o1o0g11o_3o1o0] å¤–å´ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‹ã‚‰å‘¼ã³å‡ºã™

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...

import (
	// ...ç•¥...

	"github.com/muzudho/kifuwarabe-uec14/kernel"
)
// ...ç•¥...

		// [O1o1o0g11o_3o0]
		var kernel1 = kernel.NewKernel()
		// è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ã‚«ãƒ¼ãƒãƒ«ã¸åæ˜ 
		kernel1.Board.Resize(engineConfig.BoardSize(), engineConfig.BoardSize())

		/*
		...ä»¥ä¸‹ç•¥...
		// [O1o1o0g11o_1o0] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç­‰ã‹ã‚‰ã®æ–‡å­—åˆ—å…¥åŠ›
		var scanner = bufio.NewScanner(os.Stdin)
		for scanner.Scan() {
			var command = scanner.Text()
			logg.C.Infof("# %s", command)             // äººé–“å‘ã‘ã®å‡ºåŠ›
			logg.J.Infow("input", "command", command) // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®å‡ºåŠ›
		...ä»¥ä¸Šç•¥...
		*/

			// * ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹
			// [O1o1o0g11o_3o0]
			var isHandled = kernel1.Execute(command, logg)
			if isHandled {
				continue
			}

			/*
			...ä»¥ä¸‹ç•¥...
			// [O1o1o0g11o_1o0]
			var tokens = strings.Split(command, " ")
			switch tokens[0] {
			*/
```

* ã‚«ãƒ¼ãƒãƒ«ã¨ã€è‡ªä½œã®éƒ¨åˆ†ã§ ã‚³ãƒãƒ³ãƒ‰ãŒè¢«ã£ãŸãªã‚‰ã€ã‚«ãƒ¼ãƒãƒ«ã®æ–¹ã‚’å„ªå…ˆã™ã‚‹
  * ã“ã‚Œã«ã‚ˆã‚Š ã‚«ãƒ¼ãƒãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã‚Š è‡ªä½œã®ã‚³ãƒãƒ³ãƒ‰ãŒé¿ã‘ã‚‰ã‚Œã‚‹ã“ã¨ã‹ã‚‰ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã¯å‹•ä½œãƒ†ã‚¹ãƒˆã—ã¦ã»ã—ã„

# Step [O1o1o0g11o_3o0] çŸ³å®šç¾©

## Step [O1o1o0g11o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - stone.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o0]

package kernel

import "fmt"

type Stone uint

const (
	Empty Stone = iota
	Black
	White
	Wall
)

// String - æ–‡å­—åˆ—åŒ–
func (s Stone) String() string {
	switch s {
	case Empty:
		return "."
	case Black:
		return "x"
	case White:
		return "o"
	case Wall:
		return "+"
	default:
		panic(fmt.Sprintf("%d", int(s)))
	}
}

// EOF [O1o1o0g11o0]
```

## Step [O1o1o0g11o1o0] ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥

ãŒã‚“ã°ã£ã¦ git ãªã©ã‚’ä½¿ã„ã€ `github.com/muzudho/kifuwarabe-uec14/kernel` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ã‚’  
ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã»ã—ã„  

## Step [O1o1o0g11o2o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ç§»å‹•

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd kernel
```

## Step [O1o1o0g11o3o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
go mod tidy
```

## Step [O1o1o0g11o4o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’æˆ»ã™

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd ..
```

## Step [O1o1o0g11o5o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go mod tidy
```

# Step [O1o1o0g12o_1o0] ç›¤å®šç¾©

## Step [O1o1o0g12o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - board.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰  â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g12o0]

package kernel

// Board - ç›¤
type Board struct {
	// æ ä»˜ãã®æ¨ªå¹…
	memoryWidth int

	// æ ä»˜ãã®ç¸¦å¹…
	memoryHeight int

	// äº¤ç‚¹
	//
	// * è‹±èªã§äº¤ç‚¹ã¯ node ã‹ã‚‚çŸ¥ã‚Œãªã„ãŒã€è¡¨è¨ˆç®—ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ cell ã®æ–¹ã‚’ä½¿ã†
	cells []Stone
}

// NewBoard - æ–°è¦ä½œæˆ
func NewBoard() *Board {
	var b = new(Board)

	// ç›¤ã®ã‚µã‚¤ã‚ºæŒ‡å®šã¨ã€ç›¤é¢ã®åˆæœŸåŒ–
	b.Resize(19, 19)

	return b
}

// Resize - ã‚µã‚¤ã‚ºå¤‰æ›´
func (b *Board) Resize(width int, height int) {
	b.memoryWidth = width + 2
	b.memoryHeight = height + 2
	b.cells = make([]Stone, b.getMemoryArea())

	// æ ã‚’è¨­å®šã™ã‚‹
	// ä¸Šè¾ºã€ä¸‹è¾ºã‚’å¼•ã
	{
		var y = 0
		var y2 = b.memoryHeight - 1
		for x := 0; x < b.memoryWidth; x++ {
			var i = (y * b.memoryWidth) + x
			b.cells[i] = Wall

			i = (y2 * b.memoryWidth) + x
			b.cells[i] = Wall
		}
	}
	// å·¦è¾ºã€å³è¾ºã‚’å¼•ã
	{
		var x = 0
		var x2 = b.memoryWidth - 1
		for y := 1; y < b.memoryHeight-1; y++ {
			var i = (y * b.memoryWidth) + x
			b.cells[i] = Wall

			i = (y * b.memoryWidth) + x2
			b.cells[i] = Wall
		}
	}
}

// ForeachLikeText - æ ã‚’å«ã‚ãŸå„ã‚»ãƒ«
func (b *Board) ForeachLikeText(setStone func(Stone), doNewline func()) {
	for y := 0; y < b.memoryHeight; y++ {
		if y != 0 {
			doNewline()
		}

		for x := 0; x < b.memoryWidth; x++ {
			var i = (y * b.memoryWidth) + x
			var stone = b.cells[i]
			setStone(stone)
		}
	}
}

// æ ä»˜ãç›¤ã®é¢ç©
func (b *Board) getMemoryArea() int {
	return b.memoryWidth * b.memoryHeight
}

// EOF [O1o1o0g12o0]
```

## Step [O1o1o0g12o1o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ç§»å‹•

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd kernel
```

## Step [O1o1o0g12o2o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
go mod tidy
```

## Step [O1o1o0g12o3o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’æˆ»ã™

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd ..
```

## Step [O1o1o0g12o4o0] ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥

ãŒã‚“ã°ã£ã¦ git ãªã©ã‚’ä½¿ã„ã€ `github.com/muzudho/kifuwarabe-uec14/kernel` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ã‚’  
ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã»ã—ã„  

## Step [O1o1o0g12o5o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
```

Output:  

```plaintext
go: downloading github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911114704-f68bc2cc5ece
go: upgraded github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911112135-f237cc5d1832 => v0.0.0-20220911114704-f68bc2cc5ece
```

Input:  

```
go mod tidy
```

# Step [O1o1o0g13o_1o0] board ã‚³ãƒãƒ³ãƒ‰ï¼ˆç›¤è¡¨ç¤ºï¼‰

## Step [O1o1o0g13o0] å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...

	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	case "board": // [O1o1o0g13o0]
		// äººé–“å‘ã‘ã®å‡ºåŠ›
		{
			var sb strings.Builder
			sb.WriteString(`= board:'''
. `)

			var setStone = func(s Stone) {
				sb.WriteString(fmt.Sprintf("%v", s))
			}
			var doNewline = func() {
				sb.WriteString("\n. ")
			}
			k.Board.ForeachLikeText(setStone, doNewline)
			sb.WriteString("\n. '''\n")
			logg.C.Info(sb.String())
		}
		// ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®å‡ºåŠ›
		{
			var sb strings.Builder

			var setStone = func(s Stone) {
				sb.WriteString(fmt.Sprintf("%v", s))
			}
			var doNewline = func() {
				// pass
			}
			k.Board.ForeachLikeText(setStone, doNewline)
			logg.J.Infow("output", "board", sb.String())
		}
		return true

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

// ...ç•¥...
```

## Step [O1o1o0g14o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
board
```

Output:  

```plaintext
2022-09-11T19:04:58.192+0900    = board:'''
. +++++++++++++++++++++
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +++++++++++++++++++++
. '''
```

* ã“ã®å‡ºåŠ›æ›¸å¼ã¯ ç§ã®æ–¹æ³•ã§ã‚ã£ã¦ã€å…¬å¼å¤§ä¼šã®ã‚‚ã®ã§ã¯ãªã„ã“ã¨ã«æ³¨æ„ã•ã‚ŒãŸã„
	* ğŸ“– [æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã®æ€è€ƒãƒ­ã‚°ä»•æ§˜ï¼ˆããµã‚ã‚‰ã¹2022å¹´ä»¥é™ï¼‰](https://qiita.com/muzudho1/items/ceb6130cf558cd373dd7)

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14-json.log
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14.log
  	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14-json.log`  

```plaintext
{"level":"info","ts":"2022-09-11T19:04:58.192+0900","caller":"kifuwarabe-uec14/main.go:57","msg":"input","command":"board"}
{"level":"info","ts":"2022-09-11T19:04:58.195+0900","caller":"kifuwarabe-uec14/main.go:81","msg":"output","board":"++++++++++++++++++++++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++++++++++++++++++++++"}
```

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14.log`  

```plaintext
2022-09-11T19:04:58.157+0900	# board
2022-09-11T19:04:58.192+0900	= board:'''
. +++++++++++++++++++++
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +++++++++++++++++++++
. '''
```

`quit` ã‚³ãƒãƒ³ãƒ‰ã§ æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã‚’çµ‚äº†ã—ã¦ã»ã—ã„  

# Step [O1o1o0g15o_10o0] resize ã‚³ãƒãƒ³ãƒ‰ï¼ˆç›¤ã‚µã‚¤ã‚ºã®å¤‰æ›´ï¼‰

## Step [O1o1o0g15o_11o0] å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...

	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	case "boardsize": // [O1o1o0g15o_11o0]
		// Example: `boardsize 19`
		var sideLength, err = strconv.Atoi(tokens[1])

		if err != nil {
			logg.C.Infof("? unexpected sideLength:%s\n", tokens[1])
			logg.J.Infow("error", "sideLength", tokens[1])
			return true
		}

		k.Board.Resize(sideLength, sideLength)
		logg.C.Info("=\n")
		logg.J.Infow("ok")

		return true

	// ...ç•¥...

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

// ...ç•¥...
```

## Step [O1o1o0g15o_12o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
boardsize 9
```

Output > Console:  

```plaintext
[2022-09-12 20:44:12]   # boardsize 9
[2022-09-12 20:44:12]   =
```

Output > Log > Plain:  

```plaintext
2022-09-12T20:44:12.860+0900	# boardsize 9
2022-09-12T20:44:12.896+0900	=
```

Output > Log > Json:  

```json
{"level":"info","ts":"2022-09-12T20:44:12.894+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"boardsize 9"}
{"level":"info","ts":"2022-09-12T20:44:12.896+0900","caller":"kernel/kernel.go:76","msg":"ok"}
```

Input:  

```shell
board
```

Output:  

```plaintext
[2022-09-12 20:56:20]   # board
[2022-09-12 20:56:20]   = board:'''
. +++++++++++
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +++++++++++
. '''
```

# ~~Step [O1o1o0g15o_13o0]~~

Removed  

## ~~Step [O1o1o0g15o_13o1o0]~~

Moved to `O1o1o0g11o__10o_2o0`  

## ~~Step [O1o1o0g15o_13o2o_1o0]~~

Moved to `[O1o1o0g11o__10o_3o0]`  

## ~~Step [O1o1o0g15o_13o2o_2o0]~~

Moved to `[O1o1o0g11o__10o_4o0]`  

## ~~Step [O1o1o0g15o_13o2o_3o0]~~

Merged to `[O1o1o0g11o_3o0]`  

## ~~Step [O1o1o0g15o_13o2o_4o0]~~

Moved to `[O1o1o0g11o__10o_6o0]`  

# Step [O1o1o0g15o_1o0] åº§æ¨™ã®å®šç¾©

## Step [O1o1o0g15o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - point.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰  â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g15o0]

package kernel

// Point - äº¤ç‚¹ã®åº§æ¨™ã€‚ã„ã‚ã‚†ã‚‹é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€‚å£ã‚’å«ã‚€ç›¤ã®å·¦ä¸Šã‚’ 0 ã¨ã—ã¾ã™
type Point int

// GetXFromFile - `A` ï½ `Z` ã‚’ 0 ï½ 24 ã¸å¤‰æ›ã—ã¾ã™ã€‚ å›½éš›å›²ç¢é€£ç›Ÿã®ãƒ«ãƒ¼ãƒ«ã«å€£ã„ã€ç­‹ã®ç¬¦å·ã« `I` ã¯ä½¿ã„ã¾ã›ã‚“
func GetXFromFile(file string) int {
	// ç­‹
	var x = file[0] - 'A'
	if file[0] >= 'I' {
		x--
	}
	return int(x)
}

// GetYFromRank - '1' ï½ '99' ã‚’ 0 ï½ 98 ã¸å¤‰æ›ã—ã¾ã™
func GetYFromRank(rank string) int {
	// æ®µ
	var y = int(rank[0] - '0')
	if 1 < len(rank) {
		y *= 10
		y += int(rank[1] - '0')
	}
	return y - 1
}

// GetFileFromCode - åº§æ¨™ã®ç¬¦å·ã®ç­‹ã®éƒ¨åˆ†ã‚’æŠœãå‡ºã—ã¾ã™
//
// * `code` - åº§æ¨™ã®ç¬¦å·ã€‚ Example: "A7" ã‚„ "J13"
func GetFileFromCode(code string) string {
	return code[0:1]
}

// GetRankFromCode - åº§æ¨™ã®ç¬¦å·ã®æ®µã®éƒ¨åˆ†ã‚’æŠœãå‡ºã—ã¾ã™
//
// * `code` - åº§æ¨™ã®ç¬¦å·ã€‚ Example: "A7" ã‚„ "J13"
func GetRankFromCode(code string) string {
	if 2 < len(code) {
		return code[1:3]
	}

	return code[1:2]
}

// EOF [O1o1o0g15o0]
```

## Step [O1o1o0g16o0] åº§æ¨™ã®ç®—å‡º

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰  â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g16o0]

package kernel

// GetPointFromXy - åº§æ¨™å¤‰æ› (x,y) â†’ Point
func (b *Board) GetPointFromXy(x int, y int) Point {
	// æ ã®åšã¿ 1 ã‚’è€ƒæ…®
	return Point((y+1)*b.memoryWidth + x + 1)
}

// GetPointFromCode - "A7" ã‚„ "J13" ã¨ã„ã£ãŸç¬¦å·ã‚’ Point ã¸å¤‰æ›ã—ã¾ã™
//
// * `code` - åº§æ¨™ã®ç¬¦å·ã€‚ Example: "A7" ã‚„ "J13"
func (b *Board) GetPointFromCode(code string) Point {
	return b.GetPointFromXy(
		GetXFromFile(GetFileFromCode(code)),
		GetYFromRank(GetRankFromCode(code)))
}

// EOF [O1o1o0g16o0]
```

## Step [O1o1o0g17o0] ç¬¦å·å¤‰æ›ä½œæˆ - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...


	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "coord": // [O1o1o0g17o0]
		// Example: "coord A13"
		var point = k.Board.GetPointFromCode(tokens[1])
		logg.C.Infof("= %d\n", point)
		logg.J.Infow("output", "point", point)
		return true

	case "file": // [O1o1o0g17o0]
		// Example: "file A"
		var file = GetFileFromCode(tokens[1])
		logg.C.Infof("= %s\n", file)
		logg.J.Infow("output", "file", file)
		return true

	case "rank": // [O1o1o0g17o0]
		// Example: "rank 13"
		var rank = GetRankFromCode(tokens[1])
		logg.C.Infof("= %s\n", rank)
		logg.J.Infow("output", "rank", rank)
		return true

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------


// ...ç•¥...
```

## Step [O1o1o0g18o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
file A1
```

Output > Console:  

```plaintext
[2022-09-11 23:27:52]   # file A1
[2022-09-11 23:27:52]   = A
```

Output > Log > Text:  

```plaintext
2022-09-11T23:27:52.547+0900	# file A1
2022-09-11T23:27:52.583+0900	= A
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-11T23:27:52.583+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"file A1"}
{"level":"info","ts":"2022-09-11T23:27:52.584+0900","caller":"kernel/kernel.go:73","msg":"output","file":"A"}
```

Input:  

```shell
rank A1
```

Output > Console:  

```plaintext
[2022-09-11 23:31:11]   # rank A1
[2022-09-11 23:31:11]   = 1
```

Output > Log > Text:  

```plaintext
2022-09-11T23:31:11.020+0900	# rank A1
2022-09-11T23:31:11.020+0900	= 1
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-11T23:31:11.020+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"rank A1"}
{"level":"info","ts":"2022-09-11T23:31:11.021+0900","caller":"kernel/kernel.go:80","msg":"output","rank":"1"}
```

Input:  

```shell
coord A1
```

Output > Console:  

```plaintext
[2022-09-11 23:32:42]   # coord A1
[2022-09-11 23:32:42]   = 22
```

Output > Log > Text:  

```plaintext
2022-09-11T23:32:42.228+0900	# coord A1
2022-09-11T23:32:42.229+0900	= 22
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-11T23:32:42.229+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"coord A1"}
{"level":"info","ts":"2022-09-11T23:32:42.229+0900","caller":"kernel/kernel.go:66","msg":"output","point":22}
```

# Step [O1o1o0g19o0] play ã‚³ãƒãƒ³ãƒ‰ï¼ˆçŸ³ã‚’æ‰“ã¤ï¼‰

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g19o0]

package kernel

import "strings"

// DoPlay - æ‰“ã¤
//
// * `command` - Example: `play black A19`
func (k *Kernel) DoPlay(command string, logg *SugaredLoggerForGame) {
	var tokens = strings.Split(command, " ")

	var stone Stone
	switch tokens[1] {
	case "empty":
		stone = Empty
	case "black":
		stone = Black
	case "white":
		stone = White
	case "wall":
		stone = Wall
	default:
		logg.C.Infof("? unexpected stone:%s\n", tokens[1])
		logg.J.Infow("error", "stone", tokens[1])
		return
	}

	var point = k.Board.GetPointFromCode(tokens[2])
	k.Play(stone, point)
	logg.C.Info("=\n")
	logg.J.Infow("ok")
}

func (k *Kernel) Play(stone Stone, point Point) {
	k.Board.cells[point] = stone
}

// EOF [O1o1o0g19o0]
```

## Step [O1o1o0g20o0] å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "play": // [O1o1o0g20o0]
		// Example: `play black A19`
		k.DoPlay(command, logg)
		return true

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g21o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
play black B2
```

Output > Console:  

```plaintext
[2022-09-12 21:46:48]   # play black B2
[2022-09-12 21:46:48]   =
```

Output > Log > Plain:  

```plaintext
2022-09-12T21:46:48.701+0900	# play black B2
2022-09-12T21:46:48.739+0900	=
```

Output > Log > Json:  

```json
{"level":"info","ts":"2022-09-12T21:46:48.739+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"play black B2"}
{"level":"info","ts":"2022-09-12T21:46:48.739+0900","caller":"kernel/play.go:32","msg":"ok"}
```

Input:  

```shell
board
```

Output > Console:  

```plaintext
[2022-09-12 21:49:36]   # board
[2022-09-12 21:49:36]   = board:'''
. +++++++++++++++++++++
. +...................+
. +.x.................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +++++++++++++++++++++
. '''
```

# Step [O1o1o0g22o0] å›²ç¢ã®çŸ³ã‚’æ‰“ã¤ãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…

TODO ç©ºç‚¹ä»¥å¤–ã®ã¨ã“ã‚ï¼ˆçŸ³ã¾ãŸã¯å£ã®ä¸Šï¼‰ã«çŸ³ã‚’ç½®ãã“ã¨ã®ç¦æ­¢  

TODO å‘¼å¸ç‚¹ã®ã‚«ã‚¦ãƒ³ãƒˆ  

TODO è‡ªæ®ºæ‰‹ã®å¯ï¼ä¸å¯æŒ‡å®š  

TODO ç›¸æ‰‹ã®çœ¼ã¸ã®è‡ªæ®ºæ‰‹ã®åˆ¤å®šã¨ã€ãã®ç¦æ­¢ï¼ˆãƒ«ãƒ¼ãƒ«ä¸Šç¦æ­¢ï¼‰  

TODO è‡ªåˆ†ã®çœ¼ã¸ã®è‡ªæ®ºæ‰‹ã®åˆ¤å®šã¨ã€ãã®ç¦æ­¢ã¾ãŸã¯è¨±å¯ï¼ˆæ˜ã‚‰ã‹ã«æãªæ‰‹ï¼‰  

TODO ãƒ€ãƒ¡ã®çœ¼ã¸ã®è‡ªæ®ºæ‰‹ã®åˆ¤å®šã¨ã€ãã®ç¦æ­¢ã¾ãŸã¯è¨±å¯  

TODO çŸ³ã®æ‰“ã¡ä¸Šã’

TODO ã‚³ã‚¦ã®ç¦æ­¢ï¼ˆè‡ªåˆ†ãŒï¼‘æ‰‹å‰ã«ç½®ã„ãŸã¨ã“ã‚ã«ï¼’æ‰‹ç¶šã‘ã¦ç½®ã‘ãªã„ï¼‰

## Step [O1o1o0g22o1o0] ç©ºç‚¹ä»¥å¤–ã®ã¨ã“ã‚ï¼ˆçŸ³ã¾ãŸã¯å£ã®ä¸Šï¼‰ã«çŸ³ã‚’ç½®ãã“ã¨ã®ç¦æ­¢ - IsMasonryErroré–¢æ•°ä½œæˆ

ã¨ã‚Šã‚ãˆãšã€ `çŸ³ã¾ãŸã¯å£ã®ä¸Šã«çŸ³ã‚’ç½®ãè¡Œç‚º` ã« `Masonry` ï¼ˆãƒ¡ã‚¤ã‚¹ãƒ³ãƒªãƒ¼ï¼‰ã¨ã„ã†åå‰ã‚’ä»˜ã‘ã‚‹ã€‚  
å¾“ã£ã¦ ã“ã®ä¸»ã®ã‚¨ãƒ©ãƒ¼ã¯ `Masonry error` ã¨å‘¼ã¶ã“ã¨ã«ã™ã‚‹ã€‚  
ãã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã§ã‚ã‚‹ã‹ã©ã†ã‹åˆ¤å®šã™ã‚‹é–¢æ•°ã®åå‰ã¯ `IsMasonryError` ã¨å‘¼ã¶ã“ã¨ã«ã™ã‚‹  

## Step [O1o1o0g22o1o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - masonry.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g22o1o1o0]

package kernel

import "fmt"

func (k *Kernel) IsMasonryError(stone Stone, point Point) bool {
	var target = k.Board.cells[point]
	switch target {
	case Black:
	case White:
	case Wall:
		return true
	case Empty:
		return false
	default:
		panic(fmt.Sprintf("unexpected target cell:%s", target))
	}
	return false
}

// EOF [O1o1o0g22o1o1o0]
```

# å‚è€ƒã«ã—ãŸè¨˜äº‹

## Goè¨€èª

### ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²

ğŸ“– [[Goè¨€èª] ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://zenn.dev/fm_radio/articles/ca2ff1dfcf89b5)  

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°

ğŸ“– [Goã§flagã‚’ä½¿ã£ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’æ‰±ã†](https://qiita.com/Yaruki00/items/7edc04720a24e71abfa2)  

### åˆ—æŒ™å‹

ğŸ“– [How to make Go print enum fields as string?](https://stackoverflow.com/questions/41480543/how-to-make-go-print-enum-fields-as-string)  

### å‡ºåŠ›

ğŸ“– [Go ã§å€¤ã‚’å‡ºåŠ›ã™ã‚‹æ–¹æ³•](https://golang.keicode.com/basics/go-print-basics.php)  

### å¯å¤‰é•·å¼•æ•°

ğŸ“– [Concatenating and Building Strings in Go 1.10+](https://www.calhoun.io/concatenating-and-building-strings-in-go/)  
ğŸ“– [Convert interface to string](https://yourbasic.org/golang/interface-to-string/)  

.
