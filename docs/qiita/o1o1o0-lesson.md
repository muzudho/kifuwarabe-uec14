# Step [O1o1o0g1o0] ã¯ã˜ã‚ã«

ğŸ‘‡ Step ã®å¤‰ãªæ•°å­—ã®èª¬æ˜  

ğŸ“– [é›»è„³å‘é‡è¡¨è¨˜](https://qiita.com/muzudho1/items/fdbf31e41dd8c247081f)  

ğŸ‘‡ ç·´ç¿’ç·¨ã‚’èª­ã¿çµ‚ã‚ã£ã¦ã‚‹ã‚‚ã®ã¨ã™ã‚‹  

ğŸ“– [Go [O1o1o0] ç›®æŒ‡ã›ï¼ç¬¬ï¼‘ï¼”å›ï¼µï¼¥ï¼£æ¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å›²ç¢å¤§ä¼šï¼œç·´ç¿’ç·¨ï¼](https://qiita.com/muzudho1/items/cea62be01f7418bbf150)  

ğŸ‘‡ ã¾ãŸã€æŠ€è¡“çš„ã§ãªã„å†…å®¹ã‚’å«ã‚€ãƒ–ãƒ­ã‚°ã‚’åˆ¥ã®å ´æ‰€ã« é–‹è¨­ã™ã‚‹  

ğŸ“– [ç›®æŒ‡ã›ï¼ç¬¬ï¼‘ï¼”å›ï¼µï¼¥ï¼£æ¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å›²ç¢å¤§ä¼šâ˜†ï¼ˆï¼¾ï½‘ï¼¾ï¼‰ï¼œãã®ï¼’ï¼](http://grayscale2.dou-jin.com/go/%E7%9B%AE%E6%8C%87%E3%81%9B%EF%BC%81%E7%AC%AC%EF%BC%91%EF%BC%94%E5%9B%9E%EF%BC%B5%EF%BC%A5%EF%BC%A3%E6%9D%AF%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%BC%E5%9B%B2%E7%A2%81%E5%A4%A7%E4%BC%9A%E2%98%86%EF%BC%88%EF%BC%BE)  

ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:  

| What is           | This is            |
| ----------------- | ------------------ |
| OS                | Windows            |
| Editor            | Visual Studio Code |
| Program Language  | Go                 |
| Remote Repository | Git Hub            |

ğŸ‘‡ ã¾ãšã€ã‚½ãƒ¼ã‚¹ã®ç½®ãå ´æ‰€ã‚’æ±ºã‚ã¦ãŠã  

ğŸ“– [ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/muzudho/kifuwarabe-uec14)  

## Step [O1o1o0g2o0] ã‚½ãƒ¼ã‚¹ã®ç½®ãå ´æ‰€ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰

Goè¨€èªã§ã¯ ãƒ­ãƒ¼ã‚«ãƒ«PCã®ã©ã“ã«ã‚½ãƒ¼ã‚¹ã‚’ç½®ãã‹ã¯è‡ªåˆ†ã§è¨­å®šã—ã¦æ±ºã‚ã¦ãŠãã€‚  
ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ›ãƒ¼ãƒ ã®ä¸‹ã«ç½®ã„ã¦ã„ã‚‹ã®ã§ã€çœŸä¼¼ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã»ã—ã„  

Input:  

```shell
# Windows
echo %HOMEPATH%
```

Output:  

```plaintext
\Users\ã‚€ãšã§ã‚‡
```

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ›ãƒ¼ãƒ ã®ãƒ‘ã‚¹ãŒåˆ†ã‹ã£ãŸã€‚ã“ã®ä¸‹ã« `go\src` ã§å§‹ã¾ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ä½œã£ã¦ã„ãã€‚  
ç§ã¯ä»¥ä¸‹ã®å ´æ‰€ã«ã—ãŸ  

`C:\Users\ã‚€ãšã§ã‚‡\Documents\GitHub\kifuwarabe-uec14`

ä»¥é™ã®æ–‡ç« ã§ã¯ã€ã‚ãªãŸã®ãƒªãƒã‚¸ãƒˆãƒªã«èª­ã¿æ›¿ãˆã¦ã»ã—ã„  

## Step [O1o1o0g3o0] Visual Studio Code ã‚’ä½¿ã†

ãŒã‚“ã°ã£ã¦ã€ `Visual Studio Code` ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ãŠã„ã¦ã»ã—ã„  

ğŸ“– [Visual Studio Code](https://code.visualstudio.com/)  

## Step [O1o1o0g4o0] Goã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

`Visual Studio Code` ã® `Extensions` ã‹ã‚‰ã€ `Go` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã„ã¦ã»ã—ã„  

## Step [O1o1o0g5o0] ãƒãƒ«ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¤‡æ•°ä½œã‚Œã‚‹ã‚ˆã†ã€  
è¤‡æ•°ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«å¯¾å¿œã—ã¦ãŠã    

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go work init
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
ğŸ‘‰  â””â”€â”€ ğŸ“„ go.work
```

```go
go 1.19

```

## Step [O1o1o0g6o0] è¨­å®š - .gitignore ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ï¼ˆç„¡ã‘ã‚Œã°æ–°è¦ä½œæˆï¼‰ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
ğŸ‘‰  â”œâ”€â”€ ğŸ“„ .gitignore
  	â””â”€â”€ ğŸ“„ go.work
```

ğŸ‘‡ ä¾‹ãˆã°å†’é ­ã«è¿½åŠ   

```plaintext
# ã“ã®ä¸‹ã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------

go.work


# ã“ã®ä¸Šã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------
# ...ç•¥...
```

## Step [O1o1o0g7o0] ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go mod init github.com/muzudho/kifuwarabe-uec14
#           -----------------------------------
#           1
# 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã€‚ã“ã®éƒ¨åˆ†ã¯ã‚ãªãŸã®ãƒ¬ãƒã‚¸ãƒˆãƒªã«åˆã‚ã›ã¦å¤‰ãˆã¦ã»ã—ã„
```

Output:  

```plaintext
go: creating new go.mod: module github.com/muzudho/kifuwarabe-uec14
go: to add module requirements and sums:
        go mod tidy
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
    â”œâ”€â”€ ğŸ“„ .gitignore
ğŸ‘‰  â”œâ”€â”€ ğŸ“„ go.mod
  	â””â”€â”€ ğŸ“„ go.work
```

```go
module github.com/muzudho/kifuwarabe-uec14

go 1.19
```

## Step [O1o1o0g8o0] ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚ºã¸ç™»éŒ²

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go work use .
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ã§ç·¨é›†ã•ã‚Œã¦ã„ã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ go.work
```

```go
// ...ç•¥...


// * ä»¥ä¸‹ã®è¡ŒãŒè‡ªå‹•è¿½åŠ 
use .
```

# Step [O1o1o0g9o0] ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆä½œæˆ - ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ãƒ«ãƒ‰

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g9o0]

package main

import (
	"flag"
	"fmt"
)

func main() {
	flag.Parse()
	// ãƒ—ãƒ­ã‚°ãƒ©ãƒ å
	var name = flag.Arg(0)

	// ã“ã®ä¸‹ã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	// ã“ã®ä¸Šã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	if name == "hello" { // [O1o1o0g9o0]
		fmt.Println("Hello, World!")

		// ã“ã®ä¸‹ã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------

		// ã“ã®ä¸Šã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------

	} else {
		fmt.Println("go run . {programName}")
	}
}

// EOF [O1o1o0g9o0]
```

## Step [O1o1o0g10o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
go mod tidy
```

## Step [O1o1o0g10o1o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go run . hello
```

Output:  

```plaintext
Hello, World!
```

# Step [O1o1o0g11o___100o0] ã‚«ãƒ¼ãƒãƒ«ä½œæˆ

ğŸ‘‡ ã“ã“ã§ã¯ã€ã‚«ãƒ¼ãƒãƒ«ã¯ä»¥ä¸‹ã®æ„å‘³ã‚’æŒ‡ã™  

* æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã†ã¡ã€ãŠãŠã¾ã‹ã«è¨€ã£ã¦ **ã‚²ãƒ¼ãƒ ã®çŸ¥è­˜ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ä»¥å¤–ã®éƒ¨åˆ†**
* ï¼‘ã¤ã®ã‚«ãƒ¼ãƒãƒ«ã¯ã€ï¼‘ã¤ã®å¯¾å±€ã«å¯¾å¿œã™ã‚‹

## Step [O1o1o0g11o___100o1p0] ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
ğŸ‘‰	â”œâ”€â”€ ğŸ“‚ kernel
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

## Step [O1o1o0g11o___100o2p0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ç§»å‹•

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd kernel
```

## Step [O1o1o0g11o___100o3o_1o0] ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚ºã¸ç™»éŒ²

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go work use .
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ã§ç·¨é›†ã•ã‚Œã¦ã„ã‚‹  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...


// * ä»¥ä¸‹ã®è¡ŒãŒè‡ªå‹•å‰Šé™¤
// use .
// * ä»¥ä¸‹ãŒè‡ªå‹•è¿½åŠ 
use (
	.
	./kernel
)
```

## Step [O1o1o0g11o___100o3o0] Goãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go mod init github.com/muzudho/kifuwarabe-uec14/kernel
```

Output:  

```shell
go: creating new go.mod: module github.com/muzudho/kifuwarabe-uec14/kernel
```

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
module github.com/muzudho/kifuwarabe-uec14/kernel

go 1.19
```

## Step [O1o1o0g11o___100o4p0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’æˆ»ã™

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd ..
```

# Step [O1o1o0g11o__10o_1o0] æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

## Step [O1o1o0g11o__10o_2o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - engine.toml

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
ğŸ‘‰  â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```toml
# BOF [O1o1o0g11o__10o_2o0]
# æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã™ã€‚ CgfGoBan ãªã©ã® GUI ã¯ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¾ã›ã‚“

# Game - å¯¾å±€ï¼‘ã¤åˆ†ã«ç›¸å½“
[Game]

# Komi - ã‚³ãƒŸ
Komi = 6.5

# BoardSize - ä½•è·¯ç›¤
BoardSize = 19

# MaxMoves - æœ€å¤§æ‰‹æ•°
MaxMoves = 400

# BoardData - ç›¤é¢
#
# * '.' - ç©ºç‚¹
# * 'x' - é»’çŸ³
# * 'o' - ç™½çŸ³
# * '+' - å£
# * åŠè§’ç©ºç™½ã¯ç„¡è¦–ã—ã¾ã™
BoardData = '''
+ + + + + + + + + + + + + + + + + + + + +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ . . . . . . . . . . . . . . . . . . . +
+ + + + + + + + + + + + + + + + + + + + +
'''

# PlayFirst - å…ˆè¡Œã€‚ black ã‹ white
PlayFirst = "black"

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ãƒ‘ã‚¹ã®è¨­å®š
[Paths]

# PlainTextLog - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚ˆã‚Šè©³ç´°ãªãƒ­ã‚°
PlainTextLog = "kifuwarabe-uec14.log"

# JsonLog - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®ãƒ­ã‚°
JsonLog = "kifuwarabe-uec14-json.log"

# EOF [O1o1o0g11o__10o_2o0]
```

## Step [O1o1o0g11o__10o_3o0] ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« - go-toml

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go get github.com/pelletier/go-toml
go mod tidy
```

Output:  

```plaintext
go: added github.com/pelletier/go-toml v1.9.5
```

## Step [O1o1o0g11o__10o_4o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - engine_config.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o__10o_4o0]

package main

import (
	"os"

	"github.com/pelletier/go-toml"
)

// LoadEngineConfig - æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
func LoadEngineConfig(
	path string,
	onError func(error) *Config) *Config {

	// ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼
	var fileData, err = os.ReadFile(path)
	if err != nil {
		return onError(err)
	}

	// Tomlè§£æ
	var binary = []byte(string(fileData))
	var config = new(Config)
	// Goè¨€èªã® struct ã«åˆã‚ã›ã¦ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
	toml.Unmarshal(binary, config)

	return config
}

// Config - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
type Config struct {
	// Game - å¯¾å±€
	Game Game
	// Paths - ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ãƒ‘ã‚¹ã®è¨­å®š
	Paths Paths
}

// GetBoardSize - ä½•è·¯ç›¤ã‹
func (c *Config) GetBoardSize() int {
	return int(c.Game.BoardSize)
}

// GetKomi - ã‚³ãƒŸ
//
// * float 32bit ã§è¶³ã‚Šã‚‹ãŒã€å®Ÿè¡Œé€Ÿåº¦å„ªå…ˆã§ float 64bit ã«å¤‰æ›ã—ã¦è¿”ã™
func (c *Config) GetKomi() float64 {
	return float64(c.Game.Komi)
}

// GetMaxMovesNum - æœ€å¤§æ‰‹æ•°
func (c *Config) GetMaxMovesNum() int {
	return int(c.Game.MaxMoves)
}

// GetPlayFirst - å…ˆè¡Œã€‚ black ã‹ white
func (c *Config) GetPlayFirst() string {
	return c.Game.PlayFirst
}

// GetPlainTextLog - PlainTextLog - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚ˆã‚Šè©³ç´°ãªãƒ­ã‚°
func (c *Config) GetPlainTextLog() string {
	return c.Paths.PlainTextLog
}

// GetJsonLog - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®ãƒ­ã‚°
func (c *Config) GetJsonLog() string {
	return c.Paths.JsonLog
}

// Game - å¯¾å±€
type Game struct {
	// Komi - ã‚³ãƒŸ
	Komi float32

	// BoardSize - ç›¤ã®ä¸€è¾ºã®é•·ã•
	BoardSize int8

	// MaxMoves - æ‰‹æ•°ã®ä¸Šé™
	MaxMoves int16

	// BoardData - ç›¤é¢ãƒ‡ãƒ¼ã‚¿
	BoardData string

	// PlayFirst - å…ˆè¡Œã€‚ black ã‹ white
	PlayFirst string
}

// Paths - ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ãƒ‘ã‚¹ã®è¨­å®š
type Paths struct {
	// PlainTextLog - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚ˆã‚Šè©³ç´°ãªãƒ­ã‚°
	PlainTextLog string

	// JsonLog - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®ãƒ­ã‚°
	JsonLog string
}

// EOF [O1o1o0g11o__10o_4o0]
```

## Step [O1o1o0g11o__10o_5o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - main.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...

// func main() {
	// [O1o1o0g11o__10o_5o0] æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
	var (
		pEngineFilePath = flag.String("f", "engine.toml", "engine config file path")
	)
	// * ã“ã®ä¸Šã«è¿½åŠ 
	// flag.Parse()
	// var name = flag.Arg(0)
	// ã“ã®ä¸‹ã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------
	// * ã“ã®ä¸‹ã«è¿½åŠ 
	// [O1o1o0g11o__10o_5o0] æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
	var onError = func(err error) *Config {
		// ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯å‡ºåŠ›ã§ãã¾ã›ã‚“ã€‚ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã¾ã èª­è¾¼ã‚“ã§ã„ã¾ã›ã‚“

		// å¼·åˆ¶çµ‚äº†
		panic(err)
	}
	var engineConfig = LoadEngineConfig(*pEngineFilePath, onError)

// ...ç•¥...
```

## Step [O1o1o0g11o__10o_6o0] å®Ÿè¡Œã«ã¤ã„ã¦ã®å‚™è€ƒ

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ãŸä¾‹ã¯ã€ã“ã‚Œä»¥é™ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ç¤ºã™  

ã“ã‚Œä»¥é™ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ ğŸ“„ `engine.toml` ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚„å†…å®¹ã‚’ä»»æ„ã«ç·¨é›†ã—ã¦ã€ãŒã‚“ã°ã£ã¦ãƒ†ã‚¹ãƒˆã—ã¦ã»ã—ã„ã€‚  
ãƒ†ã‚¹ãƒˆãŒçµ‚ã‚ã£ãŸã‚‰ã‚‚ã¨ã«æˆ»ã—ã¦ã»ã—ã„  

ğŸ‘‡ æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­è¾¼ã‚€ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã« `-f` å¼•æ•°ã‚’ä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go run . -f engine.toml
```

* `-f engine.toml` ã‚’çœç•¥ã™ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `./engine.toml` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿ã«è¡Œã

# Step [O1o1o0g11o__10o0] ãƒ­ã‚¬ãƒ¼è¨­å®š

## Step [O1o1o0g11o__10o1o0] ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u go.uber.org/zap
```

## Step [O1o1o0g11o__10o2_1o0] è¨­å®š - .gitignore ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â””â”€â”€ ğŸ“„ go.mod
ğŸ‘‰	â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â”œâ”€â”€ ğŸ“„ logger.go
 	â””â”€â”€ ğŸ“„ main.go
```

```plaintext
# ã“ã®ä¸‹ã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------
# ...ç•¥...

*.log

# ã“ã®ä¸Šã« kifuwarabe-uec14 ã§ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹
# ---------------------------------------------------------------
# ...ç•¥...
```

## Step [O1o1o0g11o__10o2o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o__10o2o0]

package kernel

import (
	"os"
	"time"

	"go.uber.org/zap"
	"go.uber.org/zap/zapcore"
)

type Logger struct {
	// C is sugared logger for Console
	C *zap.SugaredLogger
	// J is sugared logger as JSON
	J *zap.SugaredLogger
}

func NewSugaredLoggerForGame(plainTextLogFile *os.File, jsonLogFile *os.File) *Logger {
	var slog = new(Logger) // Sugared LOGger
	slog.C = createSugaredLoggerForConsole(plainTextLogFile)
	slog.J = createSugaredLoggerAsJson(jsonLogFile)
	return slog
}

// ãƒ­ã‚¬ãƒ¼ã‚’ä½œæˆã—ã¾ã™ï¼Œã‚³ãƒ³ã‚½ãƒ¼ãƒ«å½¢å¼
func createSugaredLoggerForConsole(plainTextLogFile *os.File) *zap.SugaredLogger {
	// è¨­å®šï¼Œã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨
	var configC = zapcore.EncoderConfig{
		MessageKey: "message",

		// LevelKey:    "level",
		// EncodeLevel: zapcore.CapitalLevelEncoder,

		TimeKey:    "time",
		EncodeTime: encodeTimeSimpleInJapan, // ç°¡ç•¥åŒ–ã—ãŸã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

		// CallerKey:    "caller",
		// EncodeCaller: zapcore.ShortCallerEncoder,
	}

	// è¨­å®šã€ãƒ•ã‚¡ã‚¤ãƒ«ç”¨
	var configF = zapcore.EncoderConfig{
		MessageKey: "message",

		// LevelKey:    "level",
		// EncodeLevel: zapcore.CapitalLevelEncoder,

		TimeKey:    "time",
		EncodeTime: zapcore.ISO8601TimeEncoder, // æ—¥æœ¬æ™‚é–“ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

		// CallerKey:    "caller",
		// EncodeCaller: zapcore.ShortCallerEncoder,
	}

	// ã‚³ã‚¢
	var core = zapcore.NewTee(
		zapcore.NewCore(
			zapcore.NewConsoleEncoder(configC), // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å½¢å¼
			zapcore.Lock(os.Stderr),            // å‡ºåŠ›å…ˆã¯æ¨™æº–ã‚¨ãƒ©ãƒ¼
			zapcore.DebugLevel),                // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
		zapcore.NewCore(
			zapcore.NewConsoleEncoder(configF), // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å½¢å¼
			zapcore.AddSync(plainTextLogFile),       // å‡ºåŠ›å…ˆã¯ãƒ•ã‚¡ã‚¤ãƒ«
			zapcore.DebugLevel),                // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
	)

	// ãƒ­ã‚¬ãƒ¼ã®ãƒ“ãƒ«ãƒ‰
	var logger = zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))
	// ç³–è¡£æ§‹æ–‡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å–å¾—
	return logger.Sugar()
}

// ãƒ­ã‚¬ãƒ¼ã‚’ä½œæˆã—ã¾ã™ï¼ŒJSONè¤‡æ•°è¡Œå½¢å¼
func createSugaredLoggerAsJson(jsonLogFile *os.File) *zap.SugaredLogger {
	// è¨­å®š > è£½å“ç”¨
	var config = zap.NewProductionEncoderConfig()
	config.EncodeTime = zapcore.ISO8601TimeEncoder // æ—¥æœ¬æ™‚é–“ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

	// ã‚³ã‚¢
	var core = zapcore.NewTee(
		zapcore.NewCore(
			zapcore.NewJSONEncoder(config), // JSONå½¢å¼
			zapcore.AddSync(jsonLogFile),   // å‡ºåŠ›å…ˆã¯ãƒ•ã‚¡ã‚¤ãƒ«
			zapcore.DebugLevel),            // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
	)

	// ãƒ­ã‚¬ãƒ¼ã®ãƒ“ãƒ«ãƒ‰
	var logger = zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))
	// ç³–è¡£æ§‹æ–‡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å–å¾—
	return logger.Sugar()
}

// ç°¡ç•¥åŒ–ã—ãŸã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
// ğŸ“– [golang zap v1.0.0 ã§ãƒ­ã‚°ã®æ—¥ä»˜ã‚’JSTã§è¡¨ç¤ºã™ã‚‹æ–¹æ³•](https://qiita.com/fuku2014/items/c6501c187c8161336485)
func encodeTimeSimpleInJapan(t time.Time, enc zapcore.PrimitiveArrayEncoder) {
	// // JSTå½¢å¼
	// const layout = "2006-01-02T15:04:05+09:00"
	// jst := time.FixedZone("Asia/Tokyo", 9*60*60)
	// enc.AppendString(t.In(jst).Format(layout))

	// ç°¡ç•¥åŒ–ã—ãŸã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
	const layout = "[2006-01-02 15:04:05]"
	jst := time.FixedZone("Asia/Tokyo", 9*60*60)
	enc.AppendString(t.In(jst).Format(layout))
}

// EOF [O1o1o0g11o__10o2o0]
```

## Step [O1o1o0g11o__10o3o_1o0] ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥

ãŒã‚“ã°ã£ã¦ git ãªã©ã‚’ä½¿ã„ã€ `github.com/muzudho/kifuwarabe-uec14/kernel` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ã‚’  
ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã»ã—ã„  

## Step [O1o1o0g11o__10o3o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...

import (
	// ...ç•¥...
	"github.com/muzudho/kifuwarabe-uec14/kernel" // * ã‚ã¨ã§ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
)

func main() {
	// ...ç•¥...
	// ã“ã®ä¸‹ã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	// [O1o1o0g11o__10o3o0] ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
	var plainTextLogFile, _ = os.OpenFile(engineConfig.GetPlainTextLog(), os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)
	defer plainTextLogFile.Close() // ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨æ¸ˆã¿æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹
	// ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
	var jsonLogFile, _ = os.OpenFile(engineConfig.GetJsonLog(), os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)
	defer jsonLogFile.Close() // ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨æ¸ˆã¿æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹
	// ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸãƒ­ã‚¬ãƒ¼ã‚’ä½¿ã†ãªã‚‰
	var logg = kernel.NewSugaredLoggerForGame(plainTextLogFile, jsonLogFile) // customized LOGGer

	// ã“ã®ä¸Šã«åˆæœŸè¨­å®šã‚’è¿½åŠ ã—ã¦ã„ã
	// ---------------------------

	if name == "hello" { // [O1o1o0g9o0]
		// ...ç•¥...
		// ã“ã®ä¸‹ã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------
		// ...ç•¥...


	} else if name == "welcome" { // [O1o1o0g11o__10o0]
		logg.C.Infof("Welcome! name:'%s' weight:%.1f x:%d", "nihon taro", 92.6, 3)
		logg.J.Infow("Welcome!",
			"name", "nihon taro", "weight", 92.6, "x", 3)


		// ...ç•¥...
		// ã“ã®ä¸Šã«åˆ†å²ã‚’æŒŸã‚“ã§ã„ã
		// ---------------------
		// ...ç•¥...
	}
```

## Step [O1o1o0g11o__10o4o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
go mod tidy
```

Output:  

```plaintext
C:\Users\ã‚€ãšã§ã‚‡\Documents\GitHub\kifuwarabe-uec14>go mod tidy
go: finding module for package github.com/muzudho/kifuwarabe-uec14/kernel
go: downloading github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911105808-5a17a869516a
go: found github.com/muzudho/kifuwarabe-uec14/kernel in github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911105808-5a17a869516a
go: downloading github.com/stretchr/testify v1.8.0
go: downloading github.com/benbjohnson/clock v1.1.0
go: downloading go.uber.org/goleak v1.1.11
go: downloading gopkg.in/yaml.v3 v3.0.1
```

ğŸ‘‡ è‡ªåˆ†ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒ­ãƒ¼ã‚«ãƒ«PCã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹  

Example: ğŸ“‚ `C:\Users\ã‚€ãšã§ã‚‡\go\pkg\mod\github.com\muzudho`  

## Step [O1o1o0g11o__10o5o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go run . welcome
```

Output:  

```shell
2022-09-11T14:42:53.258+0900    Welcome! a:1 b:2 c:3
```

* æ¨™æº–å‡ºåŠ›ã¯ã€å¤§ä¼šã‚µãƒ¼ãƒãƒ¼ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã®ã«åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚å¾“ã£ã¦ æ¨™æº–å‡ºåŠ›ã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ã¨åå‰‡è² ã‘ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹
  * å¾“ã£ã¦ã€ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã—ãŸã„ã¨ãã¯ã€æ¨™æº–ã‚¨ãƒ©ãƒ¼ã«å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ–°è¦ä½œæˆã•ã‚ŒãŸ  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14-json.log
ğŸ‘‰	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14.log
 	â”œâ”€â”€ ğŸ“„ logger.go
 	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14-json.log`  

```json
{"level":"info","ts":"2022-09-11T14:43:54.145+0900","caller":"kifuwarabe-uec14/main.go:42","msg":"Welcome!","a":1,"b":2,"c":3}
```

* ä½œæˆã•ã‚Œã‚‹ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ JSONå½¢å¼ã§ã¯ãªã„ã€‚ ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã®JSONãŒè¤‡æ•°è¡Œä¸¦ã¶

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14.log`  

```plaintext
2022-09-11T14:43:54.112+0900	info	kifuwarabe-uec14/main.go:41	Welcome! a:1 b:2 c:3
```

# Step [O1o1o0g11o__10o0] ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ ä½œæˆ

## Step [O1o1o0g11o_1o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - main.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
package main

import (
	"bufio"		// * è‡ªå‹•ã§è¿½åŠ ã•ã‚Œã‚‹
	"flag"
	"fmt"
	"os"		// * è‡ªå‹•ã§è¿½åŠ ã•ã‚Œã‚‹
	"strings"	// * è‡ªå‹•ã§è¿½åŠ ã•ã‚Œã‚‹
)

// ...ç•¥...


	if name == "hello" { // [O1o1o0g9o0]
		// ...ç•¥...
	} else {

		// * æ¶ˆã™
		// fmt.Println("go run . {programName}")

		// * è¿½åŠ 
		// [O1o1o0g11o_1o0] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç­‰ã‹ã‚‰ã®æ–‡å­—åˆ—å…¥åŠ›
		var scanner = bufio.NewScanner(os.Stdin)
		for scanner.Scan() {
			var command = scanner.Text()
			logg.C.Infof("# %s", command)             // äººé–“å‘ã‘ã®å‡ºåŠ›
			logg.J.Infow("input", "command", command) // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®å‡ºåŠ›

			// [O1o1o0g11o_1o0]
			var tokens = strings.Split(command, " ")
			switch tokens[0] {

			// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
			// -------------------------

			case "quit": // [O1o1o0g11o_1o0]
				// os.Exit(0)
				return

			// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
			// -------------------------

			default: // [O1o1o0g11o_1o0]
				logg.C.Infof("? unknown_command command:'%s'\n", tokens[0])
				logg.J.Infow("? unknown_command", "command", tokens[0])
			}
		}
	}


// ...ç•¥...
```

## Step [O1o1o0g11o_2o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
abc
```

Output:  

```
[2022-09-12 00:36:47]   # abc
[2022-09-12 00:36:47]   ? unknown_command command:'abc'
```

ğŸ‘† ãã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã¯å®šç¾©ã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒç¤ºã•ã‚Œã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
quit
```

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯çµ‚äº†ã—ãŸ  

å¼·åˆ¶çµ‚äº†ã—ãŸã„ã¨ãã¯ã€ `[Ctrl]` ã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰ `[C]` ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã»ã—ã„ã€‚  
ã“ã‚Œã‚’ä»¥å¾Œ `[Ctrl] + [C]` ã¨è¡¨è¨˜ã™ã‚‹  

# Step [O1o1o0g11o_3o0] ã‚«ãƒ¼ãƒãƒ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o_3o0]

package kernel

import "strings"

const geta = 1 // Japanese wooden clogs. Used to convert bases and ordinals.

// Kernel - ã‚«ãƒ¼ãƒãƒ«
type Kernel struct {
	// Board - ç›¤
	Board *Board
}

// NewKernel - ã‚«ãƒ¼ãƒãƒ«ã®æ–°è¦ä½œæˆ
func NewKernel(boardWidht int, boardHeight int) *Kernel {
	var k = new(Kernel)
	k.Board = NewBoard(boardWidht, boardHeight)
	return k
}

// Execute - å®Ÿè¡Œ
//
// Returns
// -------
// isHandled : bool
// å‡¦ç†æ¸ˆãªã‚‰çœŸ
func (k *Kernel) Execute(command string, logg *Logger) bool {

	var tokens = strings.Split(command, " ")
	switch tokens[0] {

	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	default:
	}

	return false
}

// EOF [O1o1o0g11o_3o0]
```

## Step [O1o1o0g11o_3o1o0] å¤–å´ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‹ã‚‰å‘¼ã³å‡ºã™

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...

import (
	// ...ç•¥...

	"github.com/muzudho/kifuwarabe-uec14/kernel"
)
// ...ç•¥...

		// [O1o1o0g12o__11o_4o0] æ£‹è­œã®åˆæœŸåŒ–ã«åˆ©ç”¨
		var onUnknownTurn = func() kernel.Stone {
			var errMsg = fmt.Sprintf("? unexpected play_first:%s", engineConfig.GetPlayFirst())
			logg.C.Info(errMsg)
			logg.J.Infow("error", "play_first", engineConfig.GetPlayFirst())
			panic(errMsg)
		}

		// [O1o1o0g11o_3o0]
		var kernel1 = kernel.NewKernel(engineConfig.GetBoardSize(), engineConfig.GetBoardSize())
		// è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ã‚«ãƒ¼ãƒãƒ«ã¸åæ˜ 
		kernel1.Board.Init(engineConfig.GetBoardSize(), engineConfig.GetBoardSize())

		/*
		...ä»¥ä¸‹ç•¥...
		// [O1o1o0g11o_1o0] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç­‰ã‹ã‚‰ã®æ–‡å­—åˆ—å…¥åŠ›
		var scanner = bufio.NewScanner(os.Stdin)
		for scanner.Scan() {
			var command = scanner.Text()
			logg.C.Infof("# %s", command)             // äººé–“å‘ã‘ã®å‡ºåŠ›
			logg.J.Infow("input", "command", command) // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®å‡ºåŠ›
		...ä»¥ä¸Šç•¥...
		*/

			// * ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹
			// [O1o1o0g11o_3o0]
			var isHandled = kernel1.Execute(command, logg)
			if isHandled {
				continue
			}

			/*
			...ä»¥ä¸‹ç•¥...
			// [O1o1o0g11o_1o0]
			var tokens = strings.Split(command, " ")
			switch tokens[0] {
			*/
```

* ã‚«ãƒ¼ãƒãƒ«ã¨ã€è‡ªä½œã®éƒ¨åˆ†ã§ ã‚³ãƒãƒ³ãƒ‰ãŒè¢«ã£ãŸãªã‚‰ã€ã‚«ãƒ¼ãƒãƒ«ã®æ–¹ã‚’å„ªå…ˆã™ã‚‹
  * ã“ã‚Œã«ã‚ˆã‚Š ã‚«ãƒ¼ãƒãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã‚Š è‡ªä½œã®ã‚³ãƒãƒ³ãƒ‰ãŒé¿ã‘ã‚‰ã‚Œã‚‹ã“ã¨ã‹ã‚‰ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã¯å‹•ä½œãƒ†ã‚¹ãƒˆã—ã¦ã»ã—ã„

# Step [O1o1o0g11o_4o0] çŸ³ã®è‰²å®šç¾©

`çŸ³` ã‚’å®šç¾©ã—ã¦ã„ãªã„ãŒã€å…ˆã« `çŸ³ã®è‰²` ã‚’å®šç¾©ã™ã‚‹  

çŸ³ã®è‰²ã®çµ„ã¿åˆã‚ã›ã‚’å®šç¾©ã™ã‚‹ã€‚  
çŸ³ã®è‰²ã®çµ„ã¿åˆã‚ã›ã¯ä»¥ä¸‹ã®ï¼”é€šã‚Šã‚ã‚‹ã€‚ã“ã‚Œã‚‰ã®é›†åˆã‚’ `Color` ã¨åä»˜ã‘ã‚‹ã“ã¨ã«ã™ã‚‹   

* `Color_None` - éš£æ¥ã™ã‚‹é€£ã¯ï¼‘ã¤ã‚‚ãªã„
* `Color_Black` - é»’çŸ³ã®é€£ã¨ã ã‘éš£æ¥ã™ã‚‹
* `Color_White` - ç™½çŸ³ã®é€£ã¨ã ã‘éš£æ¥ã™ã‚‹
* `Color_Mixed` - é»’çŸ³ã¨ç™½çŸ³ã®é€£ã®ä¸¡æ–¹ã«éš£æ¥ã™ã‚‹

## Step [O1o1o0g11o_4o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - color.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰	â”‚	â”œâ”€â”€ ğŸ“„ color.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â””â”€â”€ ğŸ“„ logger.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o_4o1o0]

package kernel

import "fmt"

type Color uint

const (
	Color_None Color = iota
	Color_Black
	Color_White
	Color_Mixed
)

// String - æ–‡å­—åˆ—åŒ–
func (c Color) String() string {
	switch c {
	case Color_None:
		return ""
	case Color_Black:
		return "x"
	case Color_White:
		return "o"
	case Color_Mixed:
		return "xo"
	default:
		panic(fmt.Sprintf("unexpected color:%d", int(c)))
	}
}

// GetAdded - è‰²ã®åŠ ç®—
func (c1 Color) GetAdded(c2 Color) Color {
	switch c1 {
	case Color_None:
		return c2
	case Color_Black:
		switch c2 {
		case Color_None:
			return Color_Black
		case Color_Black:
			return Color_Black
		case Color_White:
			return Color_Mixed
		case Color_Mixed:
			return Color_Mixed
		default:
			panic(fmt.Sprintf("unexpected my_color:%s adds_color:%s", c1, c2))
		}
	case Color_White:
		switch c2 {
		case Color_None:
			return Color_White
		case Color_Black:
			return Color_Mixed
		case Color_White:
			return Color_White
		case Color_Mixed:
			return Color_Mixed
		default:
			panic(fmt.Sprintf("unexpected my_color:%s adds_color:%s", c1, c2))
		}
	case Color_Mixed:
		return Color_Mixed
	default:
		panic(fmt.Sprintf("unexpected my_color:%s adds_color:%s", c1, c2))
	}
}

// GetOpponent - è‰²ã®åè»¢
func (c Color) GetOpponent() Color {
	switch c {
	case Color_None:
		return Color_Mixed
	case Color_Black:
		return Color_White
	case Color_White:
		return Color_Black
	case Color_Mixed:
		return Color_None
	default:
		panic(fmt.Sprintf("unexpected color:%d", int(c)))
	}
}

// EOF [O1o1o0g11o_4o1o0]
```

# Step [O1o1o0g11o_4o2o0] é€£ã®å®šç¾©

`çŸ³` ã‚’å®šç¾©ã—ã¦ã„ãªã„ãŒã€å…ˆã« `é€£` ï¼ˆã‚Œã‚“ï¼‰ã‚’å®šç¾©ã™ã‚‹ã€‚  
`é€£` ã¨ã¯ä½•ã‹ã®èª¬æ˜ã¯ã€ã“ã“ã§ã¯çœã  

### Step [O1o1o0g11o_4o2o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - ren.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ color.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ ren.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o_4o2o1o0]

package kernel

import "math"

// Ren - é€£ï¼Œã‚Œã‚“
type Ren struct {
	// Loc - çŸ³ã®ç›¤ä¸Šã®åº§æ¨™ç¬¦å·ã®ç©ºç™½åŒºåˆ‡ã‚Šã®ãƒªã‚¹ãƒˆã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®å…¥å‡ºåŠ›æ™‚ã®ã¿ä½¿ã†
	Loc string

	// Color - è‰²
	Color Color
	// AdjacentColor - éš£æ¥ã™ã‚‹çŸ³ã®è‰²
	AdjacentColor Color
	// LibertyArea - å‘¼å¸ç‚¹ã®é¢ç©
	LibertyArea int
	// è¦ç´ ã®çŸ³ã®ä½ç½®
	locations []Point
	// æœ€å°ã®å ´æ‰€ã€‚Idã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’æƒ³å®š
	minimumLocation Point
}

// NewRen - é€£ã‚’æ–°è¦ä½œæˆ
func NewRen() *Ren {
	var r = new(Ren)
	r.minimumLocation = math.MaxInt
	return r
}

// GetArea - é¢ç©ã€‚ã‚¢ã‚²ãƒãƒã®æ•°
func (r *Ren) GetArea() int {
	return len(r.locations)
}

// GetMinimumLocation - æœ€å°ã®å ´æ‰€ã€‚Idã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’æƒ³å®š
func (r *Ren) GetMinimumLocation() Point {
	return r.minimumLocation
}

// AddLocation - å ´æ‰€ã®è¿½åŠ 
func (r *Ren) AddLocation(location Point) {
	r.locations = append(r.locations, location)

	// æœ€å°ã®æ•°ã‚’æ›´æ–°
	r.minimumLocation = Point(math.Min(float64(r.minimumLocation), float64(location)))
}

// ForeachLocation - å ´æ‰€æ¯ã«
func (r *Ren) ForeachLocation(setLocation func(int, Point)) {
	for i, point := range r.locations {
		setLocation(i, point)
	}
}

// Dump - ãƒ€ãƒ³ãƒ—
func (r *Ren) Dump() string {
	var sb strings.Builder

	// å…¨ã¦ã®è¦ç´ 
	for _, location := range r.locations {
		sb.WriteString(fmt.Sprintf("%d ", location))
	}

	var text = sb.String()
	if 0 < len(text) {
		text = text[:len(text)-1]
	}
	return text
}

// EOF [O1o1o0g11o_4o2o1o0]
```

# Step [O1o1o0g11o_5o0] çŸ³å®šç¾©

## Step [O1o1o0g11o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - stone.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g11o0]

package kernel

import "fmt"

type Stone uint

const (
	Space Stone = iota
	Black
	White
	Wall
)

// GetStoneFromName - æ–‡å­—åˆ—ã®åå‰ã‚’ä¸ãˆã‚‹ã¨ã€Stoneå€¤ã‚’è¿”ã—ã¾ã™
//
// Returns
// -------
// isOk : bool
// stone : Stone
func GetStoneFromName(stoneName string, getDefaultStone func() (bool, Stone)) (bool, Stone) {
	switch stoneName {
	case "space":
		return true, Space
	case "black":
		return true, Black
	case "white":
		return true, White
	case "wall":
		return true, Wall
	default:
		return getDefaultStone()
	}
}

// GetStoneOrDefaultFromTurn - black ã¾ãŸã¯ white ã‚’ä¸ãˆã‚‹ã¨ã€Stoneå€¤ã‚’è¿”ã—ã¾ã™
//
// Returns
// -------
// stone : Stone
func GetStoneOrDefaultFromTurn(stoneName string, getDefaultStone func() Stone) Stone {
	switch stoneName {
	case "black":
		return Black
	case "white":
		return White
	default:
		return getDefaultStone()
	}
}

// GetStoneFromChar - ï¼‘æ–‡å­—ä¸ãˆã‚‹ã¨ã€Stoneå€¤ã‚’è¿”ã—ã¾ã™
//
// Returns
// -------
// isOk : bool
// stone : Stone
func GetStoneFromChar(stoneChar string, getDefaultStone func() (bool, Stone)) (bool, Stone) {
	switch stoneChar {
	case ".":
		return true, Space
	case "x":
		return true, Black
	case "o":
		return true, White
	case "+":
		return true, Wall
	default:
		return getDefaultStone()
	}
}

// String - æ–‡å­—åˆ—åŒ–
func (s Stone) String() string {
	switch s {
	case Space:
		return "."
	case Black:
		return "x"
	case White:
		return "o"
	case Wall:
		return "+"
	default:
		panic(fmt.Sprintf("%d", int(s)))
	}
}

// GetColor - è‰²ã®å–å¾—
func (s Stone) GetColor() Color {
	switch s {
	case Space:
		return Color_None
	case Black:
		return Color_Black
	case White:
		return Color_White
	case Wall:
		return Color_None
	default:
		panic(fmt.Sprintf("%d", int(s)))
	}
}

// EOF [O1o1o0g11o0]
```

## Step [O1o1o0g11o1o0] ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥

ãŒã‚“ã°ã£ã¦ git ãªã©ã‚’ä½¿ã„ã€ `github.com/muzudho/kifuwarabe-uec14/kernel` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ã‚’  
ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã»ã—ã„  

## Step [O1o1o0g11o2o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ç§»å‹•

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd kernel
```

## Step [O1o1o0g11o3o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
go mod tidy
```

## Step [O1o1o0g11o4o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’æˆ»ã™

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd ..
```

## Step [O1o1o0g11o5o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go mod tidy
```

# Step [O1o1o0g12o__10o0] ç‚¹å®šç¾©ã€ã¾ãŸã¯ãã®ç›¤åº§æ¨™ç¬¦å·å®šç¾©

ç›¤ã‚’ä½œã‚‹å‰ã«ã€ã“ã‚Œã‹ã‚‰ç›¤åº§æ¨™ç¬¦å·ã‚’å®šç¾©ã™ã‚‹  

## Step [O1o1o0g12o__10o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - point.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰  â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g12o__10o1o0]

package kernel

import (
	"fmt"
	"strconv"
)

// Point - äº¤ç‚¹ã®åº§æ¨™ã€‚ã„ã‚ã‚†ã‚‹é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€‚å£ã‚’å«ã‚€ç›¤ã®å·¦ä¸Šã‚’ 0 ã¨ã—ã¾ã™
type Point int

// GetXFromFile - `A` ï½ `Z` ã‚’ 0 ï½ 24 ã¸å¤‰æ›ã—ã¾ã™ã€‚ å›½éš›å›²ç¢é€£ç›Ÿã®ãƒ«ãƒ¼ãƒ«ã«å€£ã„ã€ç­‹ã®ç¬¦å·ã« `I` ã¯ä½¿ã„ã¾ã›ã‚“
func GetXFromFile(file string) int {
	// ç­‹
	var x = file[0] - 'A'
	if file[0] >= 'I' {
		x--
	}
	return int(x)
}

// GetFileFromX - GetXFromFile ã®é€†é–¢æ•°
func GetFileFromX(x int) string {
	// ABCDEFGHI
	// 012345678
	if 7 < x {
		// 'I' ã‚’é£›ã°ã™
		x++
	}
	// ç­‹
	return fmt.Sprintf("%c", 'A'+x)
}

// GetYFromRank - '1' ï½ '99' ã‚’ 0 ï½ 98 ã¸å¤‰æ›ã—ã¾ã™
func GetYFromRank(rank string) int {
	// æ®µ
	var y = int(rank[0] - '0')
	if 1 < len(rank) {
		y *= 10
		y += int(rank[1] - '0')
	}
	return y - 1
}

// GetRankFromY - GetYFromRank ã®é€†é–¢æ•°
//
// Parameters
// ----------
// y : int
//
//	0 .. 98
//
// Returns
// -------
// rank : string
//
//	"1" .. "99"
func GetRankFromY(y int) string {
	return strconv.Itoa(y + 1)
}

// GetFileFromCode - åº§æ¨™ã®ç¬¦å·ã®ç­‹ã®éƒ¨åˆ†ã‚’æŠœãå‡ºã—ã¾ã™
//
// * `code` - åº§æ¨™ã®ç¬¦å·ã€‚ Example: "A7" ã‚„ "J13"
func GetFileFromCode(code string) string {
	return code[0:1]
}

// GetRankFromCode - åº§æ¨™ã®ç¬¦å·ã®æ®µã®éƒ¨åˆ†ã‚’æŠœãå‡ºã—ã¾ã™
//
// * `code` - åº§æ¨™ã®ç¬¦å·ã€‚ Example: "A7" ã‚„ "J13"
func GetRankFromCode(code string) string {
	if 2 < len(code) {
		return code[1:3]
	}

	return code[1:2]
}

// EOF [O1o1o0g12o__10o1o0]
```

## Step [O1o1o0g12o__10o2o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...


	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "test_file": // [O1o1o0g12o__10o2o0]
		// Example: "test_file A"
		var file = GetFileFromCode(tokens[1])
		logg.C.Infof("= %s\n", file)
		logg.J.Infow("output", "file", file)
		return true

	case "test_rank": // [O1o1o0g12o__10o2o0]
		// Example: "test_rank 13"
		var rank = GetRankFromCode(tokens[1])
		logg.C.Infof("= %s\n", rank)
		logg.J.Infow("output", "rank", rank)
		return true

	case "test_x": // [O1o1o0g12o__10o2o0]
		// Example: "test_x 18"
		var x, err = strconv.Atoi(tokens[1])
		if err != nil {
			logg.C.Infof("? unexpected x:%s\n", tokens[1])
			logg.J.Infow("error", "x", tokens[1])
			return true
		}
		var file = GetFileFromX(x)
		logg.C.Infof("= %s\n", file)
		logg.J.Infow("output", "file", file)
		return true

	case "test_y": // [O1o1o0g12o__10o2o0]
		// Example: "test_y 18"
		var y, err = strconv.Atoi(tokens[1])
		if err != nil {
			logg.C.Infof("? unexpected y:%s\n", tokens[1])
			logg.J.Infow("error", "y", tokens[1])
			return true
		}
		var rank = GetRankFromY(y)
		logg.C.Infof("= %s\n", rank)
		logg.J.Infow("output", "rank", rank)
		return true

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------


// ...ç•¥...
```

## Step [O1o1o0g12o__10o3o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
test_file A1
```

Output > Console:  

```plaintext
[2022-09-11 23:27:52]   # test_file A1
[2022-09-11 23:27:52]   = A
```

Output > Log > PlainText:  

```plaintext
2022-09-11T23:27:52.547+0900	# test_file A1
2022-09-11T23:27:52.583+0900	= A
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-11T23:27:52.583+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"test_file A1"}
{"level":"info","ts":"2022-09-11T23:27:52.584+0900","caller":"kernel/kernel.go:73","msg":"output","file":"A"}
```

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
test_rank A1
```

Output > Console:  

```plaintext
[2022-09-11 23:31:11]   # test_rank A1
[2022-09-11 23:31:11]   = 1
```

Output > Log > PlainText:  

```plaintext
2022-09-11T23:31:11.020+0900	# test_rank A1
2022-09-11T23:31:11.020+0900	= 1
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-11T23:31:11.020+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"test_rank A1"}
{"level":"info","ts":"2022-09-11T23:31:11.021+0900","caller":"kernel/kernel.go:80","msg":"output","rank":"1"}
```

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
test_coord A1
```

Output > Console:  

```plaintext
[2022-09-11 23:32:42]   # test_coord A1
[2022-09-11 23:32:42]   = 22
```

Output > Log > PlainText:  

```plaintext
2022-09-11T23:32:42.228+0900	# test_coord A1
2022-09-11T23:32:42.229+0900	= 22
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-11T23:32:42.229+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"test_coord A1"}
{"level":"info","ts":"2022-09-11T23:32:42.229+0900","caller":"kernel/kernel.go:66","msg":"output","point":22}
```

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
test_x 18
```

* x ã¯ 0 ã‹ã‚‰å§‹ã¾ã‚‹ã®ã§ã€ 19åˆ—ç›®ã¯ 18

Output > Console:  

```plaintext
[2022-09-13 23:53:40]   # test_x 18
[2022-09-13 23:53:40]   = T
```

Output > Log > PlainText:  

```plaintext
2022-09-13T23:53:40.906+0900	# test_x 18
2022-09-13T23:53:40.943+0900	= T
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-13T23:53:40.943+0900","caller":"kifuwarabe-uec14/main.go:76","msg":"input","command":"test_x 18"}
{"level":"info","ts":"2022-09-13T23:53:40.943+0900","caller":"kernel/kernel.go:115","msg":"output","file":"T"}
```

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
test_y 18
```

* y ã¯ 0 ã‹ã‚‰å§‹ã¾ã‚‹ã®ã§ã€ 19åˆ—ç›®ã¯ 18

Output > Console:  

```plaintext
[2022-09-13 23:58:42]   # test_y 18
[2022-09-13 23:58:42]   = 19
```

Output > Log > PlainText:  

```plaintext
2022-09-13T23:58:42.739+0900	# test_y 18
2022-09-13T23:58:42.781+0900	= 19
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-13T23:58:42.781+0900","caller":"kifuwarabe-uec14/main.go:76","msg":"input","command":"test_y 18"}
{"level":"info","ts":"2022-09-13T23:58:42.782+0900","caller":"kernel/kernel.go:128","msg":"output","rank":"19"}
```

# Step [O1o1o0g12o__11o__100o0] ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - data/ren_db1.json ãƒ•ã‚¡ã‚¤ãƒ«

ã‚ã¨ã§ä½¿ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ˆã«ä½œæˆã™ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ ren_db1.json
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```plaintext
{
    "header": {
        "boardWidth": 19,
        "boardHeight": 19
    },
    "payload": {
        "1,A1": {
            "posNth": 1,
            "loc": "A1 B2 C3 D4"
        }
    }
}
```

# ~~Step [O1o1o0g12o__11o__101o0]~~

Removed

# Step [O1o1o0g12o__11o__10o0] é€£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®šç¾©

* å–ã£ãŸçŸ³ã®å ´æ‰€ã‚’è¨˜æ†¶ã—ã¦ãŠãæ§‹é€ ã‚’ä½œæˆã™ã‚‹
* å…¥å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ ã§ã‚‚ã‚ã‚‹

ğŸ“– [ç›®æŒ‡ã›ï¼ç¬¬ï¼‘ï¼”å›ï¼µï¼¥ï¼£æ¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å›²ç¢å¤§ä¼šâ˜†ï¼ˆï¼¾ï½‘ï¼¾ï¼‰ï¼œãã®ï¼”ï¼](http://grayscale2.dou-jin.com/go/%E7%9B%AE%E6%8C%87%E3%81%9B%EF%BC%81%E7%AC%AC%EF%BC%91%EF%BC%94%E5%9B%9E%EF%BC%B5%EF%BC%A5%EF%BC%A3%E6%9D%AF%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%BC%E5%9B%B2%E7%A2%81%E5%A4%A7%E4%BC%9A%E2%98%86%EF%BC%88%EF%BC%BE_19)  

## ~~Step [O1o1o0g12o__11o__10o1o0]~~

Removed  

## Step [O1o1o0g12o__11o__10o2o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - ren_db.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ ren_db_item.go
ğŸ‘‰	â”‚	â”œâ”€â”€ ğŸ“„ ren_db.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g12o__11o__10o2o0]

package kernel

import (
	"encoding/json"
	"fmt"
	"os"
	"strings"
)

// RenId - é€£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¦ç´ ã®Id
type RenId int

// GetRenId - é€£ã®Idã‚’å–å¾—
func GetRenId(boardMemoryArea int, positionNumber int, minimumLocation Point) RenId {
	return RenId(positionNumber*boardMemoryArea + int(minimumLocation))
}

type RenDb struct {
	// Header - ãƒ˜ãƒƒãƒ€ãƒ¼
	Header RenDbDocHeader

	// è¦ç´ 
	Rens map[RenId]*Ren
}

// SaveRenDb - é€£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«æ›¸è¾¼
func SaveRenDb(path string, renDb *RenDb, onError func(error)) {

	// Marshalé–¢æ•°ã§jsonã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
	// ->è¿”ã‚Šå€¤jsonDataã«ã¯ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰çµæœãŒ[]byteã®å½¢ã§æ ¼ç´ã•ã‚Œã‚‹
	jsonBinary, errA := json.Marshal(renDb)
	if errA != nil {
		fmt.Println(errA)
		return
	}

	// ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼
	var errB = os.WriteFile(path, jsonBinary, 0664)
	if errB != nil {
		onError(errB)
		return
	}
}

// LoadRenDb - é€£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«èª­å–
func LoadRenDb(path string, onError func(error) *RenDb) *RenDb {
	// ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼
	var binary, err = os.ReadFile(path)
	if err != nil {
		return onError(err)
	}

	var renDb = new(RenDb)
	var errB = json.Unmarshal(binary, renDb)
	if errB != nil {
		return onError(err)
	}

	return renDb
}

// NewRenDb - é€£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ–°è¦ä½œæˆ
func NewRenDb(boardWidth int, boardHeight int) *RenDb {
	var r = new(RenDb)
	r.Header.BoardWidth = boardWidth
	r.Header.BoardHeight = boardHeight
	return r
}

// FindRen - é€£ã‚’å–å¾—
func (db *RenDb) GetRen(renId RenId) (*Ren, bool) {
	var ren, isOk = db.Rens[renId]

	if isOk {
		return ren, true
	}

	return nil, false
}

// RegisterRen - é€£ã‚’ç™»éŒ²
func (db *RenDb) RegisterRen(positionNumber int, ren *Ren) {
	var renId = GetRenId(db.Header.GetBoardMemoryArea(), positionNumber, ren.minimumLocation)
	db.Rens[renId] = ren
}

// Dump - ãƒ€ãƒ³ãƒ—
func (db *RenDb) Dump() string {
	var sb strings.Builder

	// å…¨ã¦ã®è¦ç´ 
	for i, item := range db.Rens {
		sb.WriteString(fmt.Sprintf("[%d]%s ", i, item.Dump()))
	}

	var text = sb.String()
	if 0 < len(text) {
		text = text[:len(text)-1]
	}
	return text
}

// RenDbDocHeader - ãƒ˜ãƒƒãƒ€ãƒ¼
type RenDbDocHeader struct {
	// BoardWidth - ç›¤ã®æ¨ªå¹…
	BoardWidth int
	// BoardHeight - ç›¤ã®ç¸¦å¹…
	BoardHeight int
}

// GetBoardMemoryArea - ç›¤ã®é¢ç©
func (h *RenDbDocHeader) GetBoardMemoryArea() int {
	var wallWidth = 2
	return (h.BoardWidth + wallWidth) * (h.BoardHeight + wallWidth)
}

// EOF [O1o1o0g12o__11o__10o2o0]
```

## Step [O1o1o0g12o__11o__10o3o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ ren_db_item.go
	â”‚	â”œâ”€â”€ ğŸ“„ ren_db.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...
// type Kernel struct {
	// ...ç•¥...

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// RenDb - [O1o1o0g12o__11o__10o3o0] é€£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
	renDb *RenDb
// }
// ...ç•¥...

// func NewKernel(boardWidht int, boardHeight int,
	// ...ç•¥...

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// RenDb - [O1o1o0g12o__11o__10o3o0] é€£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
	k.renDb = NewRenDb(k.Board.GetWidth(), k.Board.GetHeight())

//	return k
// }
// ...ç•¥...
```

## Step [O1o1o0g12o__11o__10o4o0] ã‚³ãƒãƒ³ãƒ‰ç·¨é›† - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ ren_db_item.go
	â”‚	â”œâ”€â”€ ğŸ“„ ren_db.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "dump_ren_db": // [O1o1o0g12o__11o__10o4o0]
		var text = k.renDb.Dump()
		logg.C.Info("= dump'''%s\n'''\n", text)
		logg.J.Infow("ok", "dump", text)
		return true

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g12o__11o__10o5o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
dump_ren_db
```

Output > Console:  

```plaintext
dump_ren_db
[2022-09-18 17:08:29]   # dump_ren_db
[2022-09-18 17:08:29]   = dump'''
```

# Step [O1o1o0g12o__11o_1o0] æ£‹è­œå®šç¾©

## Step [O1o1o0g12o__11o_2o_1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - record_item.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
ğŸ‘‰	â”‚	â”œâ”€â”€ ğŸ“„ record_item.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF[O1o1o0g12o__11o_2o_1o0]

package kernel

// RecordItem - æ£‹è­œã®ä¸€æ‰‹åˆ†
type RecordItem struct {
	// ç€æ‰‹ç‚¹
	placePlay Point
}

// NewRecordItem - æ£‹è­œã®ä¸€æ‰‹åˆ†
func NewRecordItem() *RecordItem {
	var ri = new(RecordItem)
	return ri
}

// Clear - ç©ºã£ã½ã«ã—ã¾ã™
func (ri *RecordItem) Clear() {
	ri.placePlay = Point(0)
	ri.ko = Point(0)
}

// EOF[O1o1o0g12o__11o_2o_1o0]
```

## Step [O1o1o0g12o__11o_2o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - record.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ record_item.go
ğŸ‘‰	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g12o__11o_2o0]

package kernel

// Record - æ£‹è­œ
type Record struct {
	// å…ˆè¡Œ
	playFirst Stone

	// ä½•æ‰‹ç›®ã€‚åŸºæ•°ï¼ˆPosition numberï¼‰
	posNum int

	// æ‰‹æ¯
	items []*RecordItem
}

// NewRecord - æ£‹è­œã®æ–°è¦ä½œæˆ
func NewRecord(maxMoves int, playFirst Stone) *Record {
	var r = new(Record)
	r.playFirst = playFirst

	// æ£‹è­œã®ä¸€æ‰‹åˆ†æ¯
	r.items = make([]*RecordItem, maxMoves)
	for i := 0; i < maxMoves; i++ {
		r.items[i] = NewRecordItem()
	}

	return r
}

// GetPositionNumber - ä½•æ‰‹ç›®ã€‚åŸºæ•°
func (r *Record) GetPositionNumber() int {
	return r.posNum
}

// Push - æœ«å°¾ã«è¿½åŠ 
func (r *Record) Push(placePlay Point) {

	var item = r.items[r.posNum]
	item.placePlay = placePlay

	r.posNum++
}

// RemoveTail - æœ«å°¾ã‚’å‰Šé™¤
func (r *Record) RemoveTail(placePlay Point) {
	r.posNum--
	r.items[r.posNum].Clear()
}

// ForeachItem - å„è¦ç´ 
func (r *Record) ForeachItem(setItem func(int, *RecordItem)) {
	for i := 0; i < r.posNum; i++ {
		setItem(i, r.items[i])
	}
}

// IsKo - ã‚³ã‚¦ã‹ï¼Ÿ
func (r *Record) IsKo(placePlay Point) bool {
	// [O1o1o0g22o7o1o0] ã‚³ã‚¦ã®åˆ¤å®š
	// 2æ‰‹å‰ã«ç€æ‰‹ã—ã¦çŸ³ã‚’ã´ã£ãŸã‚Šï¼‘ã¤æ‰“ã¡ä¸Šã’ãŸã¨ãã€ãã®ç€æ‰‹ç‚¹ã¯ã‚³ã‚¦ã 
	var posNum = r.GetPositionNumber()
	if 2 <= posNum {
		var item = r.items[posNum-2]
		return item.ko == placePlay
	}

	return false
}

// EOF [O1o1o0g12o__11o_2o0]
```

## Step [O1o1o0g12o__11o_3o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// type Kernel struct {
	// ...ç•¥...

	// Record - [O1o1o0g12o__11o_3o0] æ£‹è­œ
	Record Record

// }

// NewKernel - ã‚«ãƒ¼ãƒãƒ«ã®æ–°è¦ä½œæˆ
// func NewKernel(boardWidht int, boardHeight int,
	// [O1o1o0g12o__11o_2o0] ,æ£‹è­œã®åˆæœŸåŒ–
	maxMoves int, playFirst Stone//) *Kernel {
	// ...ç•¥...

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g12o__11o_2o0] æ£‹è­œã®åˆæœŸåŒ–
	k.Record = *NewRecord(maxMoves, playFirst)

	// ...ç•¥...
	// return k
// }
```

## Step [O1o1o0g12o__11o_4o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - main.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â””â”€â”€ ğŸ“„ main.go
```

```go
		// [O1o1o0g11o_3o0]
		//var kernel1 = kernel.NewKernel(engineConfig.GetBoardSize(), engineConfig.GetBoardSize(),
			// [O1o1o0g12o__11o_4o0] æ£‹è­œã®åˆæœŸåŒ–
			engineConfig.GetMaxMovesNum(),
			kernel.GetStoneOrDefaultFromTurn(engineConfig.GetPlayFirst(), onUnknownTurn)//)
```

## Step [O1o1o0g12o__11o_5o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "record": // [O1o1o0g12o__11o_5o0]
		// Example: "record"
		var sb strings.Builder

		var setPoint = func(positionNumber int, item *RecordItem) {
			var positionNth = positionNumber + geta // åŸºæ•°ã‚’åºæ•°ã«å¤‰æ›
			var coord = k.Board.GetCodeFromPoint(item.placePlay)
			sb.WriteString(fmt.Sprintf("[%d]%s ", positionNth, coord))
		}

		k.Record.ForeachItem(setPoint)

		var text = sb.String()
		if 0 < len(text) {
			text = text[:len(text)-1]
		}
		logg.C.Infof("= record:'%s'\n", text)
		logg.J.Infow("ok", "record", text)
		return true

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g12o__11o_6o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
play black A1
play black B2
play black C3
play black D4
play black E5
record
```

Output > Console:  

```plaintext
[2022-09-17 19:05:16]   # record
[2022-09-17 19:05:16]   = record:'[1]A1 [2]B2 [3]C3 [4]D4 [5]E5'
```

# Step [O1o1o0g12o__11o0] ç›¤å®šç¾©ï¼ˆåœŸå°ï¼‰

ã“ã‚Œã‹ã‚‰ç›¤ã‚’ä½œã£ã¦ã„ãå‰ã«ã€åœŸå°ã‚’ä½œã‚‹  

## Step [O1o1o0g12o__11o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - board.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰  â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g12o__11o1o0]

package kernel

// Board - ç›¤
type Board struct {
	// æ ä»˜ãã®æ¨ªå¹…
	memoryWidth int

	// æ ä»˜ãã®ç¸¦å¹…
	memoryHeight int

	// äº¤ç‚¹
	//
	// * è‹±èªã§äº¤ç‚¹ã¯ node ã‹ã‚‚çŸ¥ã‚Œãªã„ãŒã€è¡¨è¨ˆç®—ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ cell ã®æ–¹ã‚’ä½¿ã†
	cells []Stone
}

// NewBoard - æ–°è¦ä½œæˆ
func NewBoard(boardWidht int, boardHeight int) *Board {
	var b = new(Board)

	// ç›¤ã®ã‚µã‚¤ã‚ºæŒ‡å®šã¨ã€ç›¤é¢ã®åˆæœŸåŒ–
	b.resize(boardWidht, boardHeight)

	return b
}

// GetMemoryWidth - æ ã®åšã¿ã‚’å«ã‚“ã æ¨ªå¹…
func (b *Board) GetMemoryWidth() int {
	return b.memoryWidth
}

// GetMemoryHeight - æ ã®åšã¿ã‚’å«ã‚“ã ç¸¦å¹…
func (b *Board) GetMemoryHeight() int {
	return b.memoryHeight
}

// GetWidth - æ ã®åšã¿ã‚’å«ã¾ãªã„æ¨ªå¹…
func (b *Board) GetWidth() int {
	return b.memoryWidth - 2
}

// GetHeight - æ ã®åšã¿ã‚’å«ã¾ãªã„ç¸¦å¹…
func (b *Board) GetHeight() int {
	return b.memoryHeight - 2
}

// GetStoneAt - æŒ‡å®šåº§æ¨™ã®çŸ³ã‚’å–å¾—
func (b *Board) GetStoneAt(i Point) Stone {
	return b.cells[i]
}

// SetStoneAt - æŒ‡å®šåº§æ¨™ã®çŸ³ã‚’è¨­å®š
func (b *Board) SetStoneAt(i Point, s Stone) {
	b.cells[i] = s
}

// GetColorAt - æŒ‡å®šåº§æ¨™ã®çŸ³ã®è‰²ã‚’å–å¾—
func (b *Board) GetColorAt(i Point) Color {
	return b.cells[i].GetColor()
}

// GetPointFromXy - åº§æ¨™å¤‰æ› (x,y) â†’ Point
//
// Parameters
// ----------
// x : int
//	ç­‹ç•ªå·ã€‚ Example: 19è·¯ç›¤ãªã‚‰0ï½18
// y : int
//	æ®µç•ªå·ã€‚ Example: 19è·¯ç›¤ãªã‚‰0ï½18
//
// Returns
// -------
// point : Point
//  é…åˆ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€‚ Example: 2,3 ãªã‚‰ 65
func (b *Board) GetPointFromXy(x int, y int) Point {
	return Point(y*b.memoryWidth + x)
}

// GetXyFromPoint - `GetPointFromXy` ã®é€†é–¢æ•°
func (b *Board) GetXyFromPoint(point Point) (int, int) {
	var p = int(point)
	return p % b.memoryWidth, p / b.memoryWidth
}

// ã‚µã‚¤ã‚ºå¤‰æ›´
func (b *Board) resize(width int, height int) {
	b.memoryWidth = width + 2
	b.memoryHeight = height + 2
	b.cells = make([]Stone, b.getMemoryArea())
}

// æ ä»˜ãç›¤ã®é¢ç©
func (b *Board) getMemoryArea() int {
	return b.memoryWidth * b.memoryHeight
}

// EOF [O1o1o0g12o__11o1o0]
```

## Step [O1o1o0g12o__11o2o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "test_get_point_from_xy": // [O1o1o0g12o__11o2o0]
		// Example: "test_get_point_from_xy 2 3"
		var x, errX = strconv.Atoi(tokens[1])
		if errX != nil {
			logg.C.Infof("? unexpected x:%s\n", tokens[1])
			logg.J.Infow("error", "x", tokens[1], "err", errX)
			return true
		}
		var y, errY = strconv.Atoi(tokens[2])
		if errY != nil {
			logg.C.Infof("? unexpected y:%s\n", tokens[2])
			logg.J.Infow("error", "y", tokens[2], "err", errY)
			return true
		}

		var point = k.Board.GetPointFromXy(x, y)
		logg.C.Infof("= %d\n", point)
		logg.J.Infow("output", "point", point)
		return true

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g12o__11o3o0] å‹•ä½œç¢ºèª

19è·¯ç›¤ã¨ã™ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
test_get_point_from_xy 2 3
```

Output > Console:  

```plaintext
[2022-09-14 22:37:42]   # test_get_point_from_xy 2 3
[2022-09-14 22:37:42]   = 65
```

Output > Log > PlainText:  

```plaintext
2022-09-14T22:37:42.600+0900	# test_get_point_from_xy 2 3
2022-09-14T22:37:42.637+0900	= 65
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-14T22:37:42.637+0900","caller":"kifuwarabe-uec14/main.go:76","msg":"input","command":"test_get_point_from_xy 2 3"}
{"level":"info","ts":"2022-09-14T22:37:42.638+0900","caller":"kernel/kernel.go:119","msg":"output","point":65}
```

# Step [O1o1o0g12o_1o0] ç›¤å®šç¾©ï¼ˆç›¤é¢ï¼‰

## Step [O1o1o0g12o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - board_area.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰  â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g12o0]

package kernel

// Init - ç›¤é¢åˆæœŸåŒ–
func (b *Board) Init(width int, height int) {
	// ç›¤é¢ã®ã‚µã‚¤ã‚ºãŒç•°ãªã‚‹ãªã‚‰ã€ç›¤é¢ã‚’ä½œã‚Šç›´ã™
	if b.memoryWidth != width || b.memoryHeight != height {
		b.resize(width, height)
	}

	// æ ã®ä¸Šè¾ºã€ä¸‹è¾ºã‚’å¼•ã
	{
		var y = 0
		var y2 = b.memoryHeight - 1
		for x := 0; x < b.memoryWidth; x++ {
			var i = b.GetPointFromXy(x, y)
			b.cells[i] = Wall

			i = b.GetPointFromXy(x, y2)
			b.cells[i] = Wall
		}
	}
	// æ ã®å·¦è¾ºã€å³è¾ºã‚’å¼•ã
	{
		var x = 0
		var x2 = b.memoryWidth - 1
		for y := 1; y < b.memoryHeight-1; y++ {
			var i = b.GetPointFromXy(x, y)
			b.cells[i] = Wall

			i = b.GetPointFromXy(x2, y)
			b.cells[i] = Wall
		}
	}
	// æ ã®å†…å´ã‚’ç©ºç‚¹ã§åŸ‹ã‚ã‚‹
	{
		var height = b.GetHeight()
		var width = b.GetWidth()
		for y := 1; y < height; y++ {
			for x := 1; x < width; x++ {
				var i = b.GetPointFromXy(x, y)
				b.cells[i] = Space
			}
		}
	}
}

// ForeachLikeText - æ ã‚’å«ã‚ãŸå„ã‚»ãƒ«
func (b *Board) ForeachLikeText(setStone func(Stone), doNewline func()) {
	for y := 0; y < b.memoryHeight; y++ {
		if y != 0 {
			doNewline()
		}

		for x := 0; x < b.memoryWidth; x++ {
			var i = b.GetPointFromXy(x, y)
			var stone = b.cells[i]
			setStone(stone)
		}
	}
}

// ForeachNeumannNeighborhood - [O1o1o0g13o__10o0] éš£æ¥ã™ã‚‹ï¼”æ–¹å‘ã®å®šç¾©
func (b *Board) ForeachNeumannNeighborhood(here Point, setAdjacentPoint func(int, Point)) {
	// æ±ã€åŒ—ã€è¥¿ã€å—
	for dir := 0; dir < 4; dir++ {
		var adjacentP = here + Point(b.Direction[dir]) // éš£æ¥ã™ã‚‹äº¤ç‚¹

		// ç¯„å›²å¤–ãƒã‚§ãƒƒã‚¯
		if adjacentP < 1 || b.getMemoryArea() <= int(adjacentP) {
			continue
		}

		// å£ãƒã‚§ãƒƒã‚¯
		if b.GetStoneAt(adjacentP) == Wall {
			continue
		}

		setAdjacentPoint(dir, adjacentP)
	}
}

// EOF [O1o1o0g12o0]
```

## Step [O1o1o0g12o1o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ç§»å‹•

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd kernel
```

## Step [O1o1o0g12o2o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
go mod tidy
```

## Step [O1o1o0g12o3o0] ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’æˆ»ã™

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

```shell
cd ..
```

## Step [O1o1o0g12o4o0] ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥

ãŒã‚“ã°ã£ã¦ git ãªã©ã‚’ä½¿ã„ã€ `github.com/muzudho/kifuwarabe-uec14/kernel` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ã‚’  
ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã»ã—ã„  

## Step [O1o1o0g12o5o0] tidy

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
go get -u
```

Output:  

```plaintext
go: downloading github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911114704-f68bc2cc5ece
go: upgraded github.com/muzudho/kifuwarabe-uec14/kernel v0.0.0-20220911112135-f237cc5d1832 => v0.0.0-20220911114704-f68bc2cc5ece
```

Input:  

```
go mod tidy
```

# Step [O1o1o0g13o_1o0] ç›¤è¡¨ç¤º - board ã‚³ãƒãƒ³ãƒ‰

## Step [O1o1o0g13o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	case "board": // [O1o1o0g13o0]
		// äººé–“å‘ã‘ã®å‡ºåŠ›
		{
			var sb strings.Builder
			sb.WriteString(`= board:'''
. `)

			var setStone = func(s Stone) {
				sb.WriteString(fmt.Sprintf("%v", s))
			}
			var doNewline = func() {
				sb.WriteString("\n. ")
			}
			k.Board.ForeachLikeText(setStone, doNewline)
			sb.WriteString("\n. '''\n")
			logg.C.Info(sb.String())
		}
		// ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ã®å‡ºåŠ›
		{
			var sb strings.Builder

			var setStone = func(s Stone) {
				sb.WriteString(fmt.Sprintf("%v", s))
			}
			var doNewline = func() {
				// pass
			}
			k.Board.ForeachLikeText(setStone, doNewline)
			logg.J.Infow("output", "board", sb.String())
		}
		return true

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g14o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
board
```

Output:  

```plaintext
2022-09-11T19:04:58.192+0900    = board:'''
. +++++++++++++++++++++
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +++++++++++++++++++++
. '''
```

* ã“ã®å‡ºåŠ›æ›¸å¼ã¯ ç§ã®æ–¹æ³•ã§ã‚ã£ã¦ã€å…¬å¼å¤§ä¼šã®ã‚‚ã®ã§ã¯ãªã„ã“ã¨ã«æ³¨æ„ã•ã‚ŒãŸã„
	* ğŸ“– [æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã®æ€è€ƒãƒ­ã‚°ä»•æ§˜ï¼ˆããµã‚ã‚‰ã¹2022å¹´ä»¥é™ï¼‰](https://qiita.com/muzudho1/items/ceb6130cf558cd373dd7)

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14-json.log
ğŸ‘‰ 	â”œâ”€â”€ ğŸ“„ kifuwarabe-uec14.log
  	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14-json.log`  

```plaintext
{"level":"info","ts":"2022-09-11T19:04:58.192+0900","caller":"kifuwarabe-uec14/main.go:57","msg":"input","command":"board"}
{"level":"info","ts":"2022-09-11T19:04:58.195+0900","caller":"kifuwarabe-uec14/main.go:81","msg":"output","board":"++++++++++++++++++++++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++...................++++++++++++++++++++++"}
```

ğŸ‘‡ ğŸ“„ `kifuwarabe-uec14.log`  

```plaintext
2022-09-11T19:04:58.157+0900	# board
2022-09-11T19:04:58.192+0900	= board:'''
. +++++++++++++++++++++
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +++++++++++++++++++++
. '''
```

`quit` ã‚³ãƒãƒ³ãƒ‰ã§ æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ã‚’çµ‚äº†ã—ã¦ã»ã—ã„  

# Step [O1o1o0g15o__10o0] ç›¤ã‚µã‚¤ã‚ºã®å¤‰æ›´ - resize ã‚³ãƒãƒ³ãƒ‰

## Step [O1o1o0g15o__11o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...

	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	case "boardsize": // [O1o1o0g15o__11o0]
		// Example: `boardsize 19`
		var sideLength, err = strconv.Atoi(tokens[1])

		if err != nil {
			logg.C.Infof("? unexpected sideLength:%s\n", tokens[1])
			logg.J.Infow("error", "sideLength", tokens[1])
			return true
		}

		k.Board.Init(sideLength, sideLength)
		logg.C.Info("=\n")
		logg.J.Infow("ok")

		return true

	// ...ç•¥...

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

// ...ç•¥...
```

## Step [O1o1o0g15o__12o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
boardsize 9
```

Output > Console:  

```plaintext
[2022-09-12 20:44:12]   # boardsize 9
[2022-09-12 20:44:12]   =
```

Output > Log > Plain:  

```plaintext
2022-09-12T20:44:12.860+0900	# boardsize 9
2022-09-12T20:44:12.896+0900	=
```

Output > Log > Json:  

```json
{"level":"info","ts":"2022-09-12T20:44:12.894+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"boardsize 9"}
{"level":"info","ts":"2022-09-12T20:44:12.896+0900","caller":"kernel/kernel.go:76","msg":"ok"}
```

Input:  

```shell
board
```

Output:  

```plaintext
[2022-09-12 20:56:20]   # board
[2022-09-12 20:56:20]   = board:'''
. +++++++++++
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +.........+
. +++++++++++
. '''
```

# ~~Step [O1o1o0g15o__13o0]~~

Removed  

## ~~Step [O1o1o0g15o__13o1o0]~~

Moved to `O1o1o0g11o__10o_2o0`  

## ~~Step [O1o1o0g15o__13o2o_1o0]~~

Moved to `[O1o1o0g11o__10o_3o0]`  

## ~~Step [O1o1o0g15o__13o2o_2o0]~~

Moved to `[O1o1o0g11o__10o_4o0]`  

## ~~Step [O1o1o0g15o__13o2o_3o0]~~

Merged to `[O1o1o0g11o_3o0]`  

## ~~Step [O1o1o0g15o__13o2o_4o0]~~

Moved to `[O1o1o0g11o__10o_6o0]`  

# Step [O1o1o0g15o__14o_1o0] ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - data/board1.txt ãƒ•ã‚¡ã‚¤ãƒ«

ã‚ã¨ã§ä½¿ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ˆã«ä½œæˆã™ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ set_board.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```plaintext
    ABCDEFGHJKLMNOPQRST
   +++++++++++++++++++++
 1 +...................+
 2 +.xxx...............+
 3 +.x.x...............+
 4 +.xxx...............+
 5 +...................+
 6 +...................+
 7 +...................+
 8 +...................+
 9 +...................+
10 +...................+
11 +...................+
12 +...................+
13 +...................+
14 +...................+
15 +...................+
16 +...................+
17 +...................+
18 +...................+
19 +...................+
   +++++++++++++++++++++
```

# Step [O1o1o0g15o__14o0] åˆæœŸç›¤é¢ã‚’è¨­å®šã™ã‚‹ - set_board ã‚³ãƒãƒ³ãƒ‰

## Step [O1o1o0g15o__14o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - set_board.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ set_board.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g15o__14o1o0]

package kernel

import (
	"os"
	"strings"
)

// DoSetBoard - ç›¤é¢ã‚’è¨­å®šã™ã‚‹
//
// ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®è¤‡æ•°è¡Œå…¥åŠ›ã¯é›£ã—ã„ã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–ã‚‹ã“ã¨ã«ã™ã‚‹
// * `command` - Example: `set_board file data/board1.txt`
// ........................--------- ---- ---------------
// ........................0         1    2
func (k *Kernel) DoSetBoard(command string, logg *Logger) {
	var tokens = strings.Split(command, " ")

	if tokens[1] == "file" {
		var filePath = tokens[2]

		var fileData, err = os.ReadFile(filePath)
		if err != nil {
			logg.C.Infof("? unexpected file:%s\n", filePath)
			logg.J.Infow("error", "file", filePath)
			return
		}

		var getDefaultStone = func() (bool, Stone) {
			return false, Space
		}

		var size = k.Board.getMemoryArea()
		var i Point = 0
		for _, c := range string(fileData) {
			var str = string([]rune{c})
			var isOk, stone = GetStoneFromChar(str, getDefaultStone)

			if isOk {
				if size <= int(i) {
					// é…åˆ—ã‚µã‚¤ã‚ºè¶…é
					logg.C.Infof("? board out of bounds i:%d size:%d\n", i, size)
					logg.J.Infow("error board out of bounds", "i", i, "size", size)
					return
				}

				k.Board.SetStoneAt(i, stone)
				i++
			}
		}

		// ã‚µã‚¤ã‚ºãŒè¶³ã‚Šã¦ã„ãªã„ãªã‚‰ã€ã‚¨ãƒ©ãƒ¼
		if int(i) != size {
			logg.C.Infof("? not enough size i:%d size:%d\n", i, size)
			logg.J.Infow("error not enough size", "i", i, "size", size)
			return
		}
	}

}

// EOF [O1o1o0g15o__14o1o0]
```

## Step [O1o1o0g15o__14o2o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ set_board.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	case "set_board": // [O1o1o0g15o__14o2o0]
		// Example: `set_board file data/board1.txt`
		k.DoSetBoard(command, logg)
		logg.C.Infof("=\n")
		logg.J.Infow("ok")
		return true

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g15o__14o3o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
set_board file data/board1.txt
board
```

å‡ºåŠ›ã¯ç•¥  

# Step [O1o1o0g15o_1o0] åº§æ¨™ã®å®šç¾©

## ~~Step [O1o1o0g15o0]~~

Moved to `[O1o1o0g12o__10o1o0]`  

## Step [O1o1o0g16o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - board_coord.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
ğŸ‘‰  â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g16o0]

package kernel

// GetPointFromCode - "A7" ã‚„ "J13" ã¨ã„ã£ãŸç¬¦å·ã‚’ Point ã¸å¤‰æ›ã—ã¾ã™
//
// * `code` - åº§æ¨™ã®ç¬¦å·ã€‚ Example: "A7" ã‚„ "J13"
func (b *Board) GetPointFromCode(code string) Point {
	// æ ã®åšã¿
	var left_wall = 1
	var top_wall = 1
	return b.GetPointFromXy(
		GetXFromFile(GetFileFromCode(code))+left_wall,
		GetYFromRank(GetRankFromCode(code))+top_wall)
}

// GetCodeFromPoint - `GetPointFromCode` ã®é€†é–¢æ•°
func (b *Board) GetCodeFromPoint(point Point) string {
	// æ ã®åšã¿
	var left_wall = 1
	var top_wall = 1
	var x, y = b.GetXyFromPoint(point)
	var file = GetFileFromX(x - left_wall)
	var rank = GetRankFromY(y - top_wall)
	return fmt.Sprintf("%s%s", file, rank)
}

// EOF [O1o1o0g16o0]
```

### Step [O1o1o0g16o1o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
  	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "test_get_point_from_code": // [O1o1o0g16o1o0]
		// Example: "test_get_point_from_code A1"
		var point = k.Board.GetPointFromCode(tokens[1])
		var code = k.Board.GetCodeFromPoint(point)
		logg.C.Infof("= %d %s", point, code)
		logg.J.Infow("ok", "point", point, "code", code)
		return true

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g16o2o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
test_get_point_from_code A1
```

Output > Console:  

```plaintext
[2022-09-17 17:18:46]   # test_get_point_from_code A1
[2022-09-17 17:18:46]   = 22 A1
```

## ~~Step [O1o1o0g17o0]~~

Moved to `[O1o1o0g12o__10o2o0]`  

## ~~Step [O1o1o0g18o0]~~

Moved to `[O1o1o0g12o__10o3o0]`  

# Step [O1o1o0g19o_1o0] çŸ³ã‚’æ‰“ã¤ - play ã‚³ãƒãƒ³ãƒ‰

## Step [O1o1o0g19o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - play.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g19o0]

package kernel

import "strings"

// DoPlay - æ‰“ã¤
//
// * `command` - Example: `play black A19`
// ........................---- ----- ---
// ........................0    1     2
func (k *Kernel) DoPlay(command string, logg *Logger) {
	var tokens = strings.Split(command, " ")
	var stoneName = tokens[1]

	var getDefaultStone = func() (bool, Stone) {
		logg.C.Infof("? unexpected stone:%s\n", stoneName)
		logg.J.Infow("error", "stone", stoneName)
		return false, Space
	}

	var isOk1, stone = GetStoneFromName(stoneName, getDefaultStone)
	if !isOk1 {
		return
	}

	var coord = tokens[2]
	var point = k.Board.GetPointFromCode(coord)

	// [O1o1o0g22o1o2o0] çŸ³ï¼ˆã¾ãŸã¯å£ï¼‰ã®ä¸Šã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸ
	var onMasonry = func() bool {
		logg.C.Infof("? masonry my_stone:%s point:%s\n", stone, k.Board.GetCodeFromPoint(point))
		logg.J.Infow("error", "my_stone", stone, "point", k.Board.GetCodeFromPoint(point))
		return false
	}

	var isOk = k.Play(stone, point, logg,
		// [O1o1o0g22o1o2o0] ,onMasonry
		onMasonry)

	if isOk {
		logg.C.Info("=\n")
		logg.J.Infow("ok")
	}
}

// Play - çŸ³ã‚’æ‰“ã¤
//
// Returns
// -------
// isOk : bool
//		çŸ³ã‚’ç½®ã‘ãŸã‚‰çœŸã€ç½®ã‘ãªã‹ã£ãŸã‚‰å½
func (k *Kernel) Play(stoneA Stone, pointB Point, logg *Logger,
	// [O1o1o0g22o1o2o0] onMasonry
	onMasonry func() bool) bool {

	// [O1o1o0g22o1o2o0]
	if k.IsMasonryError(stoneA, pointB) {
		return onMasonry()
	}

	// çŸ³ã‚’ç½®ã
	k.Board.SetStoneAt(pointB, stoneA)

	k.Record.Push(pointB) // æ£‹è­œã«è¿½åŠ 

	return true
}

// EOF [O1o1o0g19o0]
```

## Step [O1o1o0g20o0] å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "play": // [O1o1o0g20o0]
		// Example: `play black A19`
		k.DoPlay(command, logg)
		return true

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

## Step [O1o1o0g21o0] å®Ÿè¡Œ

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
play black B2
```

Output > Console:  

```plaintext
[2022-09-12 21:46:48]   # play black B2
[2022-09-12 21:46:48]   =
```

Output > Log > Plain:  

```plaintext
2022-09-12T21:46:48.701+0900	# play black B2
2022-09-12T21:46:48.739+0900	=
```

Output > Log > Json:  

```json
{"level":"info","ts":"2022-09-12T21:46:48.739+0900","caller":"kifuwarabe-uec14/main.go:61","msg":"input","command":"play black B2"}
{"level":"info","ts":"2022-09-12T21:46:48.739+0900","caller":"kernel/play.go:32","msg":"ok"}
```

Input:  

```shell
board
```

Output > Console:  

```plaintext
[2022-09-12 21:49:36]   # board
[2022-09-12 21:49:36]   = board:'''
. +++++++++++++++++++++
. +...................+
. +.x.................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +...................+
. +++++++++++++++++++++
. '''
```

# Step [O1o1o0g22o_1o0] ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - data/board2.txt ãƒ•ã‚¡ã‚¤ãƒ«

ã‚ã¨ã§ä½¿ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ˆã«ä½œæˆã™ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â”œâ”€â”€ ğŸ“„ board1.txt
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ board2.txt
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ set_board.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```plaintext
    ABCDEFGHJKLMNOPQRST
   +++++++++++++++++++++
 1 +...................+
 2 +...x...............+
 3 +..xox..............+
 4 +.xo.ox.............+
 5 +..xox..............+
 6 +...x...............+
 7 +...................+
 8 +...................+
 9 +...................+
10 +...................+
11 +...................+
12 +...................+
13 +...................+
14 +...................+
15 +...................+
16 +...................+
17 +...................+
18 +...................+
19 +...................+
   +++++++++++++++++++++
```

# Step [O1o1o0g22o_2o0] ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - data/board3.txt ãƒ•ã‚¡ã‚¤ãƒ«

ã‚ã¨ã§ä½¿ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ˆã«ä½œæˆã™ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â”œâ”€â”€ ğŸ“„ board1.txt
 	â”‚	â”œâ”€â”€ ğŸ“„ board2.txt
ğŸ‘‰ 	â”‚	â””â”€â”€ ğŸ“„ board3.txt
	â”œâ”€â”€ ğŸ“‚ kernel
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ set_board.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
 	â””â”€â”€ ğŸ“„ main.go
```

```plaintext
    ABCDEFGHJKLMNOPQRST
   +++++++++++++++++++++
 1 +...................+
 2 +..xo...............+
 3 +.xo.o..............+
 4 +..xo...............+
 5 +...................+
 6 +...................+
 7 +...................+
 8 +...................+
 9 +...................+
10 +...................+
11 +...................+
12 +...................+
13 +...................+
14 +...................+
15 +...................+
16 +...................+
17 +...................+
18 +...................+
19 +...................+
   +++++++++++++++++++++
```

# Step [O1o1o0g22o0] å›²ç¢ã®çŸ³ã‚’æ‰“ã¤ãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…

## Step [O1o1o0g22o1o0] ç©ºç‚¹ä»¥å¤–ã®ã¨ã“ã‚ï¼ˆçŸ³ã¾ãŸã¯å£ã®ä¸Šï¼‰ã«çŸ³ã‚’ç½®ãã“ã¨ã®ç¦æ­¢ - IsMasonryErroré–¢æ•°ä½œæˆ

ã¨ã‚Šã‚ãˆãšã€ `çŸ³ã¾ãŸã¯å£ã®ä¸Šã«çŸ³ã‚’ç½®ãè¡Œç‚º` ã« `Masonry` ï¼ˆãƒ¡ã‚¤ã‚¹ãƒ³ãƒªãƒ¼ï¼‰ã¨ã„ã†åå‰ã‚’ä»˜ã‘ã‚‹ã€‚  
å¾“ã£ã¦ ã“ã®ä¸»ã®ã‚¨ãƒ©ãƒ¼ã¯ `Masonry error` ã¨å‘¼ã¶ã“ã¨ã«ã™ã‚‹ã€‚  
ãã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã§ã‚ã‚‹ã‹ã©ã†ã‹åˆ¤å®šã™ã‚‹é–¢æ•°ã®åå‰ã¯ `IsMasonryError` ã¨å‘¼ã¶ã“ã¨ã«ã™ã‚‹  

### Step [O1o1o0g22o1o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - masonry.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g22o1o1o0]

package kernel

import "fmt"

func (k *Kernel) IsMasonryError(stone Stone, point Point) bool {
	var target = k.Board.cells[point]

	switch target {
	case Space:
		return false
	case Black, White, Wall:
		return true
	default:
		panic(fmt.Sprintf("unexpected target cell:%s", target))
	}
}

// EOF [O1o1o0g22o1o1o0]
```

### Step [O1o1o0g22o1o2o0] å‘¼å‡ºã—

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ä»¥ä¸‹ã®ç®‡æ‰€ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// func (k *Kernel) DoPlay(command string, logg *Logger) {
	// ...ç•¥...
	// var point = k.Board.GetPointFromCode(tokens[2])

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g22o1o2o0]
	var onMasonry = func() bool {
		logg.C.Infof("? masonry my_stone:%s point:%s\n", stone, point)
		logg.J.Infow("error", "my_stone", stone, "point", point)
		return false
	}

	// var isOk = k.Play(stone, point, logg,
		// * ä»¥ä¸‹ã‚’è¿½åŠ 
		// [O1o1o0g22o1o2o0] ,onMasonry
		onMasonry//)
	// ...ç•¥...
// }

// func (k *Kernel) Play(stone Stone, point Point, logg *Logger,
	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g22o1o2o0] onMasonry
	onMasonry func() bool//) bool {

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g22o1o2o0]
	if k.IsMasonryError(stone, point) {
		return onMasonry()
	}

//	k.Board.cells[point] = stone
//	return true
// }
```

## Step [O1o1o0g22o2o0] é€£ã®èªè­˜ã¨ã€å‘¼å¸ç‚¹ã®ã‚«ã‚¦ãƒ³ãƒˆ - GetLiberty é–¢æ•°ä½œæˆ

ç›¤ä¸Šã®åº§æ¨™ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãã“ã«ã‚ã‚‹ `é€£` ã® `å‘¼å¸ç‚¹` ã®æ•°ã‚’ç®—å‡ºã—ãŸã„  

* `é€£` - Renã€ã‚Œã‚“ã€‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å›²ç¢ç”¨èªã€‚èª¬æ˜ã¯çœç•¥
* `å‘¼å¸ç‚¹` - Libertyã€ã“ãã‚…ã†ã¦ã‚“ã€‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼å›²ç¢ç”¨èªã€‚èª¬æ˜ã¯çœç•¥

ğŸ‘‡ å‘¼å¸ç‚¹ã‚’æ•°ãˆã‚‹ãŸã‚ã«æ¢ç´¢ã™ã‚‹ã¨ã€ä¸€ç·’ã«ä»¥ä¸‹ã®ã“ã¨ã‚‚è¡Œãˆã‚‹  

* é€£ã®èªè­˜
* éš£æ¥ã™ã‚‹é€£ã®è‰²ã®å–å¾—

ã“ã®ã‚ˆã†ãªæ¢ç´¢ã‚’è¡Œã†é–¢æ•°ã«åå‰ã‚’ä»˜ã‘ã‚‹ã€‚  
`GetRen` ãŒãµã•ã‚ã—ã„ãŒã€æ…£ç¿’ã‚’å„ªå…ˆã—ã¦ `GetLiberty` ã¨åä»˜ã‘ã‚‹ã“ã¨ã«ã™ã‚‹  

### ~~Step [O1o1o0g22o2o1o0]~~

Moved to `[O1o1o0g11o_4o2o1o0]`  

### Step [O1o1o0g22o2o2o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - check_board.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g22o2o2o0]

package kernel

// CheckBoard - ãƒã‚§ãƒƒã‚¯ç›¤
type CheckBoard struct {
	// æ ä»˜ãã®æ¨ªå¹…
	memoryWidth int

	// æ ä»˜ãã®ç¸¦å¹…
	memoryHeight int

	// äº¤ç‚¹
	//
	// * è‹±èªã§äº¤ç‚¹ã¯ node ã‹ã‚‚çŸ¥ã‚Œãªã„ãŒã€è¡¨è¨ˆç®—ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ cell ã®æ–¹ã‚’ä½¿ã†
	cells []bool
}

// NewCheckBoard - æ–°è¦ä½œæˆ
//
// * ä½¿ç”¨ã™ã‚‹å‰ã« Init é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã»ã—ã„
func NewCheckBoard() *CheckBoard {
	var b = new(CheckBoard)
	return b
}

// Init - ç›¤é¢åˆæœŸåŒ–
func (b *CheckBoard) Init(width int, height int) {
	// ç›¤é¢ã®ã‚µã‚¤ã‚ºãŒç•°ãªã‚‹ãªã‚‰ã€ç›¤é¢ã‚’ä½œã‚Šç›´ã™
	if b.memoryWidth != width || b.memoryHeight != height {
		b.Resize(width, height)
		return
	}

	// ç›¤é¢ã®ã‚¯ãƒªã‚¢ãƒ¼
	for i := 0; i < len(b.cells); i++ {
		b.cells[i] = false
	}
}

// Resize - ã‚µã‚¤ã‚ºå¤‰æ›´
func (b *CheckBoard) Resize(width int, height int) {
	b.memoryWidth = width + 2
	b.memoryHeight = height + 2
	b.cells = make([]bool, b.getMemoryArea())
}

// Check - ãƒã‚§ãƒƒã‚¯ã‚’ä»˜ã‘ã¾ã™
func (b *CheckBoard) Check(point Point) {
	b.cells[point] = true
}

// IsChecked - ãƒã‚§ãƒƒã‚¯ãŒä»˜ã„ã¦ã„ã‚‹ã‹ï¼Ÿ
func (b *CheckBoard) IsChecked(point Point) bool {
	return b.cells[point]
}

// æ ä»˜ãç›¤ã®é¢ç©
func (b *CheckBoard) getMemoryArea() int {
	return b.memoryWidth * b.memoryHeight
}

// EOF [O1o1o0g22o2o2o0]
```

### Step [O1o1o0g22o2o3o_1o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - board.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// type Board struct {
// ...ç•¥...

	// Direction - ï¼”æ–¹å‘ï¼ˆæ±ã€åŒ—ã€è¥¿ã€å—ï¼‰ã®ç•ªåœ°ã¸ã®ç›¸å¯¾ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
	Direction [4]int

// }
// ...ç•¥...

// func (b *Board) resize(width int, height int) {
	// ...ç•¥...

	// ï¼”æ–¹å‘ï¼ˆæ±ã€åŒ—ã€è¥¿ã€å—ï¼‰ã®ç•ªåœ°ã¸ã®ç›¸å¯¾ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
	b.Direction = [4]int{1, -b.GetMemoryWidth(), -1, b.GetMemoryWidth()}

// }
```

### Step [O1o1o0g22o2o3o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - kernel.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...
// type Kernel struct {
//	Board *Board

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g22o2o3o0]
	// CheckBoard - å‘¼å¸ç‚¹ã®æ¢ç´¢æ™‚ã«ä½¿ã„ã¾ã™
	CheckBoard *CheckBoard
	// Ren - å‘¼å¸ç‚¹ã®æ¢ç´¢æ™‚ã«ä½¿ã„ã¾ã™
	Ren *Ren
//}

// func NewKernel(boardWidht int, boardHeight int) *Kernel {
//	var k = new(Kernel)
//	k.Board = NewBoard(boardWidht, boardHeight)

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g22o2o3o0]
	k.CheckBoard = NewCheckBoard()

//	return k
// }
```

### Step [O1o1o0g22o2o4o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - liberty.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g22o2o4o0]

package kernel

// GetLiberty - å‘¼å¸ç‚¹ã®æ•°ãˆä¸Šã’ã€‚é€£ã®æ•°ãˆä¸Šã’
//
// Parameters
// ----------
// * `arbitraryPoint` - é€£ã«å«ã¾ã‚Œã‚‹ä»»æ„ã®ä¸€ç‚¹
func (k *Kernel) GetLiberty(arbitraryPoint Point) *Ren {
	// ãƒã‚§ãƒƒã‚¯ãƒœãƒ¼ãƒ‰ã®åˆæœŸåŒ–
	k.CheckBoard.Init(k.Board.GetWidth(), k.Board.GetHeight())
	// é€£ã®åˆæœŸåŒ–
	k.Ren = NewRen()
	// é€£ã®è‰²
	k.Ren.Color = k.Board.GetColorAt(arbitraryPoint)
	// éš£æ¥ã™ã‚‹é€£ã®è‰²
	k.Ren.AdjacentColor = Color_None

	k.searchRen(arbitraryPoint)

	return k.Ren
}

// å†å¸°é–¢æ•°ã€‚é€£ã®æ¢ç´¢
func (k *Kernel) searchRen(here Point) {
	k.CheckBoard.Check(here)
	k.Ren.AddLocation(here)

	var setAdjacentPoint = func(dir int, adjacentP Point) {
		// æ¢ç´¢æ¸ˆã¿ãªã‚‰ã‚¹ã‚­ãƒƒãƒ—
		if k.CheckBoard.IsChecked(adjacentP) {
			return
		}

		var adjacentS = k.Board.GetStoneAt(adjacentP)
		if adjacentS == Space { // ç©ºç‚¹
			k.CheckBoard.Check(adjacentP)
			k.Ren.LibertyArea++
			return
		} else if adjacentS == Wall { // å£
			return
		}

		var adjacentC = adjacentS.GetColor()
		// éš£æ¥ã™ã‚‹è‰²ã€è¿½åŠ 
		k.Ren.AdjacentColor = k.Ren.AdjacentColor.GetAdded(adjacentC)

		if adjacentC == k.Ren.Color { // åŒè‰²ã®çŸ³
			k.searchRen(adjacentP) // å†å¸°
		}
	}

	// éš£æ¥ã™ã‚‹ï¼”æ–¹å‘
	k.Board.ForeachNeumannNeighborhood(here, setAdjacentPoint)
}

// EOF [O1o1o0g22o2o4o0]
```

### Step [O1o1o0g22o2o5o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...


	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------

	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "test_get_liberty": // [O1o1o0g22o2o5o0]
		// Example: "test_get_liberty B2"
		var point = k.Board.GetPointFromCode(tokens[1])
		var ren = k.GetLiberty(point)
		logg.C.Infof("= ren color:%s area:%d libertyArea:%d adjacentColor:%s\n", ren.Color, ren.GetArea(), ren.LibertyArea, ren.AdjacentColor)
		logg.J.Infow("output ren", "color", ren.Color, "area", ren.GetArea(), "libertyArea", ren.LibertyArea, "adjacentColor", ren.AdjacentColor)
		return true

	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------


// ...ç•¥...
```

### Step [O1o1o0g22o2o6o0] å‹•ä½œç¢ºèª

19è·¯ç›¤ã¨ã™ã‚‹  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
play black B2
test_get_liberty B2
```

Output > Console:  

```plaintext
[2022-09-14 23:36:15]   # play black B2
[2022-09-14 23:36:15]   =

[2022-09-14 23:36:21]   # test_get_liberty B2
[2022-09-14 23:36:21]   = ren color:x area:1 libertyArea:4 adjacentColor:
```

Output > Log > PlainText:  

```plaintext
2022-09-14T23:36:15.521+0900	# play black B2
2022-09-14T23:36:15.556+0900	=

2022-09-14T23:36:21.463+0900	# test_get_liberty B2
2022-09-14T23:36:21.464+0900	= ren color:x area:1 libertyArea:4 adjacentColor:
```

Output > Log > JSON:  

```json
{"level":"info","ts":"2022-09-14T23:36:15.556+0900","caller":"kifuwarabe-uec14/main.go:76","msg":"input","command":"play black B2"}
{"level":"info","ts":"2022-09-14T23:36:15.556+0900","caller":"kernel/play.go:43","msg":"ok"}
{"level":"info","ts":"2022-09-14T23:36:21.464+0900","caller":"kifuwarabe-uec14/main.go:76","msg":"input","command":"test_get_liberty B2"}
{"level":"info","ts":"2022-09-14T23:36:21.465+0900","caller":"kernel/kernel.go:115","msg":"output ren","color":"x","area":1,"libertyArea":4,"adjacentColor":""}
```

## Step [O1o1o0g22o3o0] ç›¸æ‰‹ã®çœ¼ã«çŸ³ã‚’ç½®ãã“ã¨ã®ç¦æ­¢ - OpponentEye

å›²ç¢ã®ãƒ«ãƒ¼ãƒ«ã§ã¯ã€ç›¸æ‰‹ã®çœ¼ã¸ã¯çŸ³ã‚’ç½®ã‘ãªã„ã€‚ã“ã‚Œã‚’åˆ¤å®šã™ã‚‹  

ã¨ã‚Šã‚ãˆãšã€ã“ã®ãƒ«ãƒ¼ãƒ«ã¸ç›´è¨³ã§çŸ­ã„åå‰ã‚’ä»˜ã‘ã‚‹ã€‚ ä»®ã« `OpponentEye` ã¨ã§ã‚‚å‘¼ã¶ã“ã¨ã«ã™ã‚‹  

ã“ã®ãƒ«ãƒ¼ãƒ«ã¯ã€ã‚ã¨ã§å‡ºã¦ãã‚‹ `Captured` ã®ãƒ«ãƒ¼ãƒ«ã‚ˆã‚Šã¯å„ªå…ˆåº¦ãŒä½ã„ã¨ã™ã‚‹  

### Step [O1o1o0g22o3o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - kernel.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// func (k *Kernel) DoPlay(command string, logg *Logger) {

	// ...ç•¥...
	// [O1o1o0g22o3o1o0] ç›¸æ‰‹ã®çœ¼ã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸ
	var onOpponentEye = func() bool {
		logg.C.Infof("? opponent_eye my_stone:%s point:%s\n", stone, k.Board.GetCodeFromPoint(point))
		logg.J.Infow("error opponent_eye", "my_stone", stone, "point", k.Board.GetCodeFromPoint(point))
		return false
	}

//	var isOk = k.Play(stone, point, logg,
//		// [O1o1o0g22o1o2o0] ,onMasonry
//		onMasonry,
		// [O1o1o0g22o3o1o0] ,onOpponentEye
		onOpponentEye//)
//
//	if isOk {
//		logg.C.Info("=\n")
//		logg.J.Infow("ok")
//	}
// }

// func (k *Kernel) Play(stoneA Stone, pointB Point, logg *Logger,
	// // [O1o1o0g22o1o2o0] onMasonry
	// onMasonry func() bool,
	// [O1o1o0g22o3o1o0] onOpponentEye
	onOpponentEye func() bool//) bool {

	// ...ç•¥...
	// // [O1o1o0g22o1o2o0]
	// if k.IsMasonryError(stone, point) {
	//	return onMasonry()
	// }

	// [O1o1o0g22o3o1o0]
	var renC = k.GetLiberty(pointB)
	if renC.GetArea() == 1 { // çŸ³Aã‚’ç½®ã„ãŸäº¤ç‚¹ã‚’å«ã‚€é€£Cã«ã¤ã„ã¦ã€é€£Cã®é¢ç©ãŒ1ã§ã‚ã‚‹ï¼ˆçœ¼ï¼‰
		if stoneA.GetColor() == renC.AdjacentColor.GetOpponent() {
			// ã‹ã¤ã€é€£Cã«éš£æ¥ã™ã‚‹é€£ã®è‰²ãŒã€çŸ³Aã®ã¡ã‚‡ã†ã©åå¯¾å´ã®è‰²ã§ã‚ã£ãŸãªã‚‰ã€
			// ç›¸æ‰‹ã®çœ¼ã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸã¨ã¿ãªã™
			return onOpponentEye()
		}
	}

	// ...ç•¥...
	// k.Board.cells[point] = stone
	// return true
```

### Step [O1o1o0g22o3o2o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
set_board file data/board1.txt
play white C3
```

Output > Console:  

```plaintext
[2022-09-17 00:41:29]   # play white C3
[2022-09-17 00:41:29]   ? opponent_eye my_stone:o point:C3
```

## Step [O1o1o0g22o4o0] è‡ªåˆ†ã®çœ¼ã«çŸ³ã‚’ç½®ãã“ã¨ã®ä»»æ„ã®ç¦æ­¢

å›²ç¢ã®ãƒ«ãƒ¼ãƒ«ä¸Šå¯èƒ½ã ãŒã€æ˜ã‚‰ã‹ã«æãªæ‰‹ã¯ã€ãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‹ã‚‰é™¤å¤–ã—ãŸã„ã€‚  
å¯¾å±€æ™‚ã«ã¯è¨±å¯ã—ã€ãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ™‚ã«ã¯ç¦æ­¢ã™ã‚‹ã‚ˆã†ã€é¸æŠã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹  

### Step [O1o1o0g22o4o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - play.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// ...ç•¥...
// type Kernel struct {
	// ...ç•¥...

	// CanNotPutOnMyEye - [O1o1o0g22o4o1o0] è‡ªåˆ†ã®çœ¼ã«çŸ³ã‚’ç½®ãã“ã¨ã¯ã§ãã¾ã›ã‚“
	CanNotPutOnMyEye bool
// }
// ...ç•¥...

// func (k *Kernel) DoPlay(command string, logg *Logger) {

	// ...ç•¥...
	// [O1o1o0g22o4o1o0] è‡ªåˆ†ã®çœ¼ã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸ
	var onForbiddenMyEye = func() bool {
		logg.C.Infof("? my_eye my_stone:%s point:%s\n", stone, k.Board.GetCodeFromPoint(point))
		logg.J.Infow("error my_eye", "my_stone", stone, "point", k.Board.GetCodeFromPoint(point))
		return false
	}

//	var isOk = k.Play(stone, point, logg,
//		// [O1o1o0g22o1o2o0] ,onMasonry
//		onMasonry,
//		// [O1o1o0g22o3o1o0] ,onOpponentEye
//		onOpponentEye,
		// [O1o1o0g22o4o1o0] ,onForbiddenMyEye
		onForbiddenMyEye//)
//
//	if isOk {
//		logg.C.Info("=\n")
//		logg.J.Infow("ok")
//	}
// }

// func (k *Kernel) Play(stoneA Stone, pointB Point, logg *Logger,
	// // [O1o1o0g22o1o2o0] onMasonry
	// onMasonry func() bool,
	// [O1o1o0g22o3o1o0] onOpponentEye
	onOpponentEye func() bool,
	// [O1o1o0g22o4o1o0]
	onForbiddenMyEye func() bool//) bool {

	// ...ç•¥...
	// // [O1o1o0g22o3o1o0]
	// var renC = k.GetLiberty(pointB)
	// if renC.GetArea() == 1 { // çŸ³Aã‚’ç½®ã„ãŸäº¤ç‚¹ã‚’å«ã‚€é€£Cã«ã¤ã„ã¦ã€é€£Cã®é¢ç©ãŒ1ã§ã‚ã‚‹ï¼ˆçœ¼ï¼‰
	// 	if stoneA.GetColor() == renC.AdjacentColor.GetOpponent() {
			// ã‹ã¤ã€é€£Cã«éš£æ¥ã™ã‚‹é€£ã®è‰²ãŒã€çŸ³Aã®ã¡ã‚‡ã†ã©åå¯¾å´ã®è‰²ã§ã‚ã£ãŸãªã‚‰ã€
			// ç›¸æ‰‹ã®çœ¼ã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸã¨ã¿ãªã™
	// 		return onOpponentEye()

		} else if k.CanNotPutOnMyEye && stoneA.GetColor() == renC.AdjacentColor {
			// [O1o1o0g22o4o1o0]
			// ã‹ã¤ã€é€£Cã«éš£æ¥ã™ã‚‹é€£ã®è‰²ãŒã€çŸ³Aã®è‰²ã§ã‚ã£ãŸãªã‚‰ã€
			// è‡ªåˆ†ã®çœ¼ã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸã¨ã¿ãªã™
			return onForbiddenMyEye()

	// }

	// ...ç•¥...
	// k.Board.cells[point] = stone
	// return true
```

### Step [O1o1o0g22o4o2o_1o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - kernel.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
  	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "can_not_put_on_my_eye": // [O1o1o0g22o4o2o_1o0]
		// Example 1: "can_not_put_on_my_eye get"
		// Example 2: "can_not_put_on_my_eye set true"
		var method = tokens[1]
		switch method {
		case "get":
			var value = k.CanNotPutOnMyEye
			logg.C.Infof("= %t\n", value)
			logg.J.Infow("ok", "value", value)
			return true

		case "set":
			var value = tokens[2]
			switch value {
			case "true":
				k.CanNotPutOnMyEye = true
				return true
			case "false":
				k.CanNotPutOnMyEye = false
				return true
			default:
				logg.C.Infof("? unexpected method:%s value:%s\n", method, value)
				logg.J.Infow("error", "method", method, "value", value)
				return true
			}

		default:
			logg.C.Infof("? unexpected method:%s\n", method)
			logg.J.Infow("error", "method", method)
			return true
		}

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

### Step [O1o1o0g22o4o2o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
set_board file data/board1.txt
play black C3
```

Output > Console:  

```plaintext
[2022-09-17 09:11:48]   # play black C3
[2022-09-17 09:11:48]   =
```

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
set_board file data/board1.txt
can_not_put_on_my_eye set true
play black C3
```

Output > Console:  

```plaintext
[2022-09-17 09:11:48]   # play black C3
[2022-09-17 09:11:48]   ? my_eye my_stone:x point:C3
```

## Step [O1o1o0g22o5o0] ä»»æ„ã®é€£ã®æ‰“ã¡ä¸Šã’ - RemoveRen é–¢æ•°ä½œæˆ

### Step [O1o1o0g22o5o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - kernel_facade.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g22o5o1o0]

package kernel

// RemoveRen - çŸ³ã®é€£ã‚’æ‰“ã¡ä¸Šã’ã¾ã™
func (k *Kernel) RemoveRen(ren *Ren) {
	// ç©ºç‚¹ã‚’ã‚»ãƒƒãƒˆ
	var setLocation = func(i int, location Point) {
		k.Board.SetStoneAt(location, Space)
	}

	// å ´æ‰€æ¯ã«
	ren.ForeachLocation(setLocation)
}

// EOF [O1o1o0g22o5o1o0]
```

### Step [O1o1o0g22o5o2o0] ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	case "remove_ren": // [O1o1o0g22o5o2o0]
		// Example: "remove_ren B2"
		var point = k.Board.GetPointFromCode(tokens[1])
		var ren = k.GetLiberty(point)
		k.RemoveRen(ren)
		logg.C.Infof("=\n")
		logg.J.Infow("ok")
		return true

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

### Step [O1o1o0g22o5o3o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
set_board file data/board1.txt
remove_ren B2
```

Output > Console:  

```plaintext
[2022-09-17 12:17:02]   # remove_ren B2
[2022-09-17 12:17:02]   =
```

## Step [O1o1o0g22o6o0] æ­»ã«çŸ³ã®é€£ã®æ‰“ã¡ä¸Šã’ - Captured

çŸ³Aã‚’ç›¤ä¸Šã«ç½®ã„ã¦æŒ‡ã‚’é›¢ã—ãŸã°ã‹ã‚Šã®ç›¤é¢ã¨ã™ã‚‹ã€‚  
çŸ³Aã«éš£æ¥ã™ã‚‹ç›¸æ‰‹ã®çŸ³ã®é€£ã®ã†ã¡ã€å‘¼å¸ç‚¹ãŒï¼ã®ã‚‚ã®ã¯æ‰“ã¡ä¸Šã’ã‚‹ã€‚  

ã“ã®ã¨ãã€ `OpponentEye` ã®ãƒ«ãƒ¼ãƒ«ã¨ç›¸åã™ã‚‹ã“ã¨ãŒã‚ã‚‹

### Step [O1o1o0g22o6o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - play.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
// func (k *Kernel) Play(stoneA Stone, pointB Point, logg *Logger,

	// [O1o1o0g22o6o1o0] Captured ãƒ«ãƒ¼ãƒ«
	var isExists4rensToRemove = false
	var o4rensToRemove [4]*Ren
	var isChecked4rensToRemove = false

	// ...ç•¥...
	// [O1o1o0g22o3o1o0]
	// var renC = k.GetLiberty(pointB)
	// if renC.GetArea() == 1 {
		// if stoneA.GetColor() == renC.AdjacentColor.GetOpponent() {

			// * ä»¥ä¸‹ã‚’è¿½åŠ 
			// [O1o1o0g22o6o1o0] æ‰“ã¡ã‚ã’ã‚‹æ­»ã«çŸ³ã®é€£ã‚’å–å¾—
			k.Board.SetStoneAt(pointB, stoneA) // ã„ã£ãŸã‚“ã€çŸ³ã‚’ç½®ã
			isExists4rensToRemove, o4rensToRemove = k.GetRenToCapture(pointB)
			isChecked4rensToRemove = true
			k.Board.SetStoneAt(pointB, Space) // çŸ³ã‚’å–ã‚Šé™¤ã

			if !isExists4rensToRemove {
				// `Captured` ãƒ«ãƒ¼ãƒ«ã¨è¢«ã‚‰ãªã‘ã‚Œã°
				return onOpponentEye()
			}

			// * ä»¥ä¸‹ã‚’å‰Šé™¤
			// onOpponentEye()

		// } else if k.CanNotPutOnMyEye && stoneA.GetColor() == renC.AdjacentColor {
			// ...ç•¥...
		// }
	// }

	// ...ç•¥...
	// çŸ³ã‚’ç½®ã
	// k.Board.SetStoneAt(pointB, stoneA)

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g22o6o1o0] æ‰“ã¡ã‚ã’ã‚‹æ­»ã«çŸ³ã®é€£ã‚’å–å¾—
	if !isChecked4rensToRemove {
		isExists4rensToRemove, o4rensToRemove = k.GetRenToCapture(pointB)
	}

	// [O1o1o0g22o6o1o0] æ­»ã«çŸ³ã‚’æ‰“ã¡ã‚ã’ã‚‹
	if isExists4rensToRemove {
		for dir := 0; dir < 4; dir++ {
			var ren = o4rensToRemove[dir]
			if ren != nil {
				k.RemoveRen(ren)
			}
		}
	}

	// return true
// }

// GetRenToCapture - ç¾åœ¨ã€ç€æ‰‹å¾Œã®ç›¤é¢ã¨ã—ã¾ã™ã€‚æ‰“ã¡ä¸Šã’ã‚‰ã‚Œã‚‹çŸ³ã®é€£ã‚’è¿”ã—ã¾ã™
//
// Returns
// -------
// isExists : bool
// renToRemove : [4]*Ren
// éš£æ¥ã™ã‚‹æ±ã€åŒ—ã€è¥¿ã€å—ã«ã‚ã‚‹çŸ³ã‚’å«ã‚€é€£
func (k *Kernel) GetRenToCapture(placePlay Point) (bool, [4]*Ren) {
	// [O1o1o0g22o6o1o0]
	var isExists bool
	var rensToRemove [4]*Ren
	var renIds = [4]Point{math.MaxInt, math.MaxInt, math.MaxInt, math.MaxInt}

	var setAdjacentPoint = func(dir int, adjacentP Point) {
		var adjacentR = k.GetLiberty(adjacentP)

		// åŒã˜é€£ã‚’æ•°ãˆä¸Šã’ã‚‹ã®ã‚’é˜²æ­¢ã™ã‚‹
		var renId = adjacentR.GetMinimumLocation()
		for i := 0; i < dir; i++ {
			if renIds[i] == renId { // IdãŒæ—¢å­˜
				return
			}
		}

		if adjacentR.LibertyArea < 1 {
			isExists = true
			rensToRemove[dir] = adjacentR
		}
	}

	// éš£æ¥ã™ã‚‹ï¼”æ–¹å‘
	k.Board.ForeachNeumannNeighborhood(placePlay, setAdjacentPoint)

	return isExists, rensToRemove
}
```

### Step [O1o1o0g22o6o2o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
set_board file data/board2.txt
play black D4
```

Output > Console:  

```plaintext
[2022-09-17 14:35:58]   # play black D4
[2022-09-17 14:35:58]   =
```

## Step [O1o1o0g22o7o0] ã‚³ã‚¦ã®ç¦æ­¢ - Ko

è‡ªåˆ†ãŒï¼‘æ‰‹å‰ã«ç½®ã„ãŸã¨ã“ã‚ã«ï¼’æ‰‹ç¶šã‘ã¦ç½®ã‘ãªã„

### Step [O1o1o0g22o7o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - record_item.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
ğŸ‘‰	â”‚	â”œâ”€â”€ ğŸ“„ record_item.go
	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...
// type RecordItem struct {
	// ...ç•¥...

	// [O1o1o0g22o7o1o0] ã‚³ã‚¦ã®ä½ç½®
	ko Point
// }
// ...ç•¥...
```

### Step [O1o1o0g22o7o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - record.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â””â”€â”€ ğŸ“„ board1.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
	â”‚	â”œâ”€â”€ ğŸ“„ record_item.go
ğŸ‘‰	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// ...ç•¥...
// Push - æœ«å°¾ã«è¿½åŠ 
// func (r *Record) Push(placePlay Point,
	// [O1o1o0g22o7o1o0] ã‚³ã‚¦ã®ä½ç½®
	ko Point//) {

	// var item = r.items[r.posNum]
	// item.placePlay = placePlay

	// [O1o1o0g22o7o1o0] ã‚³ã‚¦ã®ä½ç½®
	item.ko = ko

	// r.posNum++
// }
```

### Step [O1o1o0g22o7o2o0] ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† - play.go

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â”œâ”€â”€ ğŸ“„ board1.txt
 	â”‚	â”œâ”€â”€ ğŸ“„ board2.txt
 	â”‚	â””â”€â”€ ğŸ“„ board3.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ record_item.go
 	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// func (k *Kernel) DoPlay(command string, logg *Logger) {

	// ...ç•¥...
	// [O1o1o0g22o4o1o0] è‡ªåˆ†ã®çœ¼ã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸ
	// var onForbiddenMyEye = func() bool {
		// ...ç•¥...
	// }

	// [O1o1o0g22o7o2o0] ã‚³ã‚¦ã«çŸ³ã‚’ç½®ã“ã†ã¨ã—ãŸ
	var onKo = func() bool {
		logg.C.Infof("? ko my_stone:%s point:%s\n", stone, k.Board.GetCodeFromPoint(point))
		logg.J.Infow("error ko", "my_stone", stone, "point", k.Board.GetCodeFromPoint(point))
		return false
	}

	// var isOk = k.Play(stone, point, logg,
		// // [O1o1o0g22o1o2o0] ,onMasonry
		// onMasonry,
		// // [O1o1o0g22o3o1o0] ,onOpponentEye
		// onOpponentEye,
		// // [O1o1o0g22o4o1o0] ,onForbiddenMyEye
		// onForbiddenMyEye,
		// // [O1o1o0g22o7o2o0] ,onKo
		onKo//)
	// ...ç•¥...

// }
// ...ç•¥...

// func (k *Kernel) Play(stoneA Stone, pointB Point, logg *Logger,
	// // [O1o1o0g22o1o2o0] onMasonry
	// onMasonry func() bool,
	// // [O1o1o0g22o3o1o0] onOpponentEye
	// onOpponentEye func() bool,
	// // [O1o1o0g22o4o1o0] onForbiddenMyEye
	// onForbiddenMyEye func() bool,
	// [O1o1o0g22o7o2o0] onKo
	onKo func() bool//) bool {

	// [O1o1o0g22o1o2o0]
	// if k.IsMasonryError(stoneA, pointB) {
	// 	return onMasonry()
	// }
	// ...ç•¥...

	// [O1o1o0g22o7o2o0] ã‚³ã‚¦ã®åˆ¤å®š
	if k.Record.IsKo(pointB) {
		return onKo()
	}
	// ...ç•¥...

	// * ä»¥ä¸‹ã‚’è¿½åŠ 
	// [O1o1o0g22o7o2o0] ã‚³ã‚¦ã®åˆ¤å®š
	var capturedCount = 0 // ã‚¢ã‚²ãƒãƒ

//	// [O1o1o0g22o6o1o0] æ­»ã«çŸ³ã‚’æ‰“ã¡ã‚ã’ã‚‹
//	if isExists4rensToRemove {
//		for dir := 0; dir < 4; dir++ {
//			var ren = o4rensToRemove[dir]
//			if ren != nil {
//				k.RemoveRen(ren)

				// * ä»¥ä¸‹ã‚’è¿½åŠ 
				// [O1o1o0g22o7o2o0] ã‚³ã‚¦ã®åˆ¤å®š
				capturedCount += ren.GetArea()

//			}
//		}
//	}

	// [O1o1o0g22o7o2o0] ã‚³ã‚¦ã®åˆ¤å®š
	var ko = Point(0)
	if capturedCount == 1 {
		ko = pointB
	}

	// æ£‹è­œã«è¿½åŠ 
	//k.Record.Push(pointB,
		// * ä»¥ä¸‹ã‚’è¿½åŠ 
		// [O1o1o0g22o7o2o0] ã‚³ã‚¦ã®åˆ¤å®š
		ko//)

```

### Step [O1o1o0g22o7o4o0] ã‚³ãƒãƒ³ãƒ‰ç·¨é›† - kernel.go ãƒ•ã‚¡ã‚¤ãƒ«

ğŸ‘‡ ä»¥ä¸‹ã®æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â”œâ”€â”€ ğŸ“„ board1.txt
 	â”‚	â”œâ”€â”€ ğŸ“„ board2.txt
 	â”‚	â””â”€â”€ ğŸ“„ board3.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ record_item.go
 	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

ğŸ‘‡ ãŒã‚“ã°ã£ã¦ã€ Execute ãƒ¡ã‚½ãƒƒãƒ‰ã«æŒ¿å…¥ã—ã¦ã»ã—ã„  

```go
	// ...ç•¥...
	// ã“ã®ä¸‹ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...

	// * ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ä½ç½®ã«ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹æ–‡ã‚’æŒ¿å…¥
	// case "record": // [O1o1o0g12o__11o_5o0]
		// ...ç•¥...

		// var setPoint = func(i int, item *RecordItem) {
			// var positionNth = i + geta // åŸºæ•°ã‚’åºæ•°ã«å¤‰æ›
			// var coord = k.Board.GetCodeFromPoint(item.placePlay)

			// * ä»¥ä¸‹ã‚’å‰Šé™¤
			// sb.WriteString(fmt.Sprintf("[%d]%s ", positionNth, coord))

			// * ä»¥ä¸‹ã‚’è¿½åŠ 
			// [O1o1o0g22o7o4o0] ã‚³ã‚¦ã‚’è¿½åŠ 
			var koStr string
			if item.ko == Point(0) {
				koStr = ""
			} else {
				koStr = fmt.Sprintf("(%s)", k.Board.GetCodeFromPoint(item.ko))
			}
			sb.WriteString(fmt.Sprintf("[%d]%s%s ", positionNth, coord, koStr))
		// }
		// ...ç•¥...

	// ...ç•¥...
	// ã“ã®ä¸Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŒŸã‚“ã§ã„ã
	// -------------------------
	// ...ç•¥...
```

### Step [O1o1o0g22o7o4o0] å‹•ä½œç¢ºèª

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„

Input:  

```shell
go run .
```

ã“ã‚Œã§ã€æ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³å†…ã®å…¥åŠ›å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã«å…¥ã£ãŸ  

ğŸ‘‡ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã»ã—ã„  

Input:  

```shell
set_board file data/board3.txt
play black D3
play white C3
play black D3
```

Output > Console:  

```plaintext
set_board file data/board3.txt
[2022-09-17 22:39:55]   # set_board file data/board3.txt
[2022-09-17 22:39:55]   =

play black D3
[2022-09-17 22:39:55]   # play black D3
[2022-09-17 22:39:55]   =

play white C3
[2022-09-17 22:39:55]   # play white C3
[2022-09-17 22:39:55]   =

play black D3
[2022-09-17 22:39:55]   # play black D3
[2022-09-17 22:39:55]   ? ko my_stone:x point:D3
```

## Step [O1o1o0g23o0] æ‰“ã£ãŸçŸ³ã®ã‚¢ãƒ³ãƒ‰ã‚¥ - Undo

### Step [O1o1o0g23o1o0] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ - play_undo.go

ğŸ‘‡ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦ã»ã—ã„  

```plaintext
  	ğŸ“‚ kifuwarabe-uec14
	â”œâ”€â”€ ğŸ“‚ data
 	â”‚	â”œâ”€â”€ ğŸ“„ board1.txt
 	â”‚	â”œâ”€â”€ ğŸ“„ board2.txt
 	â”‚	â””â”€â”€ ğŸ“„ board3.txt
	â”œâ”€â”€ ğŸ“‚ kernel
	â”‚	â”œâ”€â”€ ğŸ“‚ play_rule
	â”‚	â”œâ”€â”€ ğŸ“„ board_area.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board_coord.go
  	â”‚	â”œâ”€â”€ ğŸ“„ board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ check_board.go
 	â”‚	â”œâ”€â”€ ğŸ“„ color.go
	â”‚	â”œâ”€â”€ ğŸ“„ go.mod
	â”‚	â”œâ”€â”€ ğŸ“„ go.sum
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel_facade.go
 	â”‚	â”œâ”€â”€ ğŸ“„ kernel.go
 	â”‚	â”œâ”€â”€ ğŸ“„ liberty.go
 	â”‚	â”œâ”€â”€ ğŸ“„ logger.go
 	â”‚	â”œâ”€â”€ ğŸ“„ masonry.go
ğŸ‘‰ 	â”‚	â”œâ”€â”€ ğŸ“„ play_undo.go
 	â”‚	â”œâ”€â”€ ğŸ“„ play.go
 	â”‚	â”œâ”€â”€ ğŸ“„ point.go
 	â”‚	â”œâ”€â”€ ğŸ“„ record_item.go
 	â”‚	â”œâ”€â”€ ğŸ“„ record.go
 	â”‚	â”œâ”€â”€ ğŸ“„ ren.go
 	â”‚	â””â”€â”€ ğŸ“„ stone.go
    â”œâ”€â”€ ğŸ“„ .gitignore
 	â”œâ”€â”€ ğŸ“„ engine_config.go
  	â”œâ”€â”€ ğŸ“„ engine.toml
    â”œâ”€â”€ ğŸ“„ go.mod
  	â”œâ”€â”€ ğŸ“„ go.work
	â””â”€â”€ ğŸ“„ main.go
```

```go
// BOF [O1o1o0g23o1o0]

package kernel

// DoUndoPlay - çŸ³ã‚’æ‰“ã£ãŸã®ã‚’æˆ»ã™
//
// * `command` - Example: `undo`
// ........................----
// ........................0
func (k *Kernel) DoUndoPlay(command string, logg *Logger) {
	k.UndoPlay()
}

// UndoPlay - çŸ³ã‚’æ‰“ã£ãŸã®ã‚’æˆ»ã™
//
// Returns
// -------
// isOk : bool
//
//	çŸ³ã‚’ç½®ã‘ãŸã‚‰çœŸã€ç½®ã‘ãªã‹ã£ãŸã‚‰å½
func (k *Kernel) UndoPlay() bool {

	// åˆæœŸå±€é¢ã‹ã‚‰å‰ã«ã¯æˆ»ã›ãªã„
	if k.Record.GetPositionNumber() < 1 {
		return false
	}

	return false
}

// EOF [O1o1o0g23o1o0]
```

TODO æ±ã€åŒ—ã€è¥¿ã€å—ã«éš£æ¥ã™ã‚‹é€£ã‚’é‡è¤‡ã—ã¦æ•°ãˆãªã„ã‚ˆã†ã«å¸¸ã«æ³¨æ„ã™ã‚‹ã“ã¨
TODO æ£‹è­œã«å–ã£ãŸçŸ³ã‚’è¨˜éŒ²ã™ã‚‹
TODO å–ã£ãŸçŸ³ã‚’æˆ»ã™
TODO ã‚¢ãƒ³ãƒ‰ã‚¥

# å‚è€ƒã«ã—ãŸè¨˜äº‹

## Goè¨€èª

### ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²

ğŸ“– [[Goè¨€èª] ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://zenn.dev/fm_radio/articles/ca2ff1dfcf89b5)  

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°

ğŸ“– [Goã§flagã‚’ä½¿ã£ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’æ‰±ã†](https://qiita.com/Yaruki00/items/7edc04720a24e71abfa2)  

### åˆ—æŒ™å‹

ğŸ“– [How to make Go print enum fields as string?](https://stackoverflow.com/questions/41480543/how-to-make-go-print-enum-fields-as-string)  

### å‡ºåŠ›

ğŸ“– [Go ã§å€¤ã‚’å‡ºåŠ›ã™ã‚‹æ–¹æ³•](https://golang.keicode.com/basics/go-print-basics.php)  

### å¯å¤‰é•·å¼•æ•°

ğŸ“– [Concatenating and Building Strings in Go 1.10+](https://www.calhoun.io/concatenating-and-building-strings-in-go/)  
ğŸ“– [Convert interface to string](https://yourbasic.org/golang/interface-to-string/)  

### æ–‡å­—åˆ—

ğŸ“– [Go: 1æ–‡å­—ãšã¤ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹](https://blog.sarabande.jp/post/61104920128)  

### é…åˆ—

ğŸ“– [ã‚¹ãƒ©ã‚¤ã‚¹æ“ä½œ(è¦ç´ ã®è¿½åŠ ãƒ»å‰Šé™¤, ã‚½ãƒ¼ãƒˆ, ä»–ã®ã‚¹ãƒ©ã‚¤ã‚¹ã¨çµåˆ)](https://www.wakuwakubank.com/posts/782-go-slice/)  

### ãƒ•ã‚¡ã‚¤ãƒ«å…¥å‡ºåŠ›

ğŸ“– [Read a file in Go](https://gosamples.dev/read-file/#:~:text=The%20simplest%20way%20of%20reading,by%20line%20or%20in%20chunks.)  

### JSON

ğŸ“– [Goã«ãŠã‘ã‚‹jsonã®æ‰±ã„æ–¹ã‚’æ•´ç†ãƒ»è€ƒå¯Ÿã—ã¦ã¿ãŸ ~ ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒã‚’æ·»ãˆã¦](https://zenn.dev/hsaki/articles/go-convert-json-struct)  

### ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

ğŸ“– [[Goè¨€èª] åˆå¿ƒè€…å¿…è¦‹ã‚·ãƒªãƒ¼ã‚º: ãƒãƒƒãƒ—ï¼ˆMapï¼‰](https://qiita.com/wifecooky/items/2ffe41d55c575b2ce5e2)  

### æ•°å­¦

ğŸ“– [[math] 2ã¤ã®å€¤ã®ã†ã¡å°ã•ã„æ–¹ã‚’è¿”ã™ (Min)](http://www.openspc2.org/reibun/Go/1.1.1/pkg/math/1043/index.html)  

.
